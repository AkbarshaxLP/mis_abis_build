(window.webpackJsonp=window.webpackJsonp||[]).push([[65,34],{1100:function(e,t,l){var content=l(1277);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(53).default)("51cfa04c",content,!0,{sourceMap:!1})},1276:function(e,t,l){"use strict";l(1100)},1277:function(e,t,l){var o=l(52)(!1);o.push([e.i,'.timetable-header .item[data-v-726b78b2]{margin-top:24px}.timetable-header .item p[data-v-726b78b2]{font-weight:500;font-size:10px;text-transform:uppercase;color:#6e768e;margin-bottom:4px}.timetable-header .item p[data-v-726b78b2],.timetable-header .item span[data-v-726b78b2]{font-family:"Roboto";font-style:normal;line-height:16px}.timetable-header .item span[data-v-726b78b2]{font-weight:400;font-size:14px;color:#2b2d33;line-height:normal}.group-view-header[data-v-726b78b2]{display:flex;align-items:center}.group-view-header h1[data-v-726b78b2]{font-family:"Roboto";font-style:normal;font-weight:700;font-size:18px;line-height:21px;color:#2b2d33;flex:1}.gradebook-accardion-title[data-v-726b78b2]{display:flex;align-items:center}.gradebook-accardion-title h1[data-v-726b78b2]{margin:0;font-family:"Roboto";font-style:normal;font-weight:500;font-size:14px;line-height:16px;color:#2b2d33}.gradebook-accardion-body[data-v-726b78b2]{border:1px solid #e9eaea}.gradebook-accardion-body p[data-v-726b78b2]{margin:0;font-family:"Roboto";font-size:14px;line-height:16px;color:#2b2d33}',""]),e.exports=o},1456:function(e,t,l){"use strict";l.r(t);l(22),l(2),l(256),l(8);var o={data:function(){return{dic_timetable:{},timeTableList:[],index:1,loading:!1,timetable1:{file:null},timetable2:{file:null},timetable_upload1:{file:null},timetable_upload2:{file:null},dialog_timetable_1:!1,dialog_timetable_2:!1,form:{academic_year:null},rows:{results:[]},attach_form:{group:null,student:[]},students:{results:[]}}},computed:{role:function(){var e;return null===(e=this.$store.state.auth.user)||void 0===e?void 0:e.role.name}},created:function(){this.getTimetableTeachers()},methods:{DeleteTimeTable:function(e){var t=this;this.index=0,this.loading=!0,this.$axios.delete("/time_table/".concat(e,"/")).then((function(){t.getTimetableTeachers()})).catch((function(){t.loading=!1}))},getTimetableTeachers:function(){var e=this,t=this.$route.params.id;this.loading=!0,this.$axios.get("/time_table/?academic_year=".concat(t,"&type=for_teacher&limit=1000")).then((function(t){e.timeTableList=t.data.results,e.timetable2=t.data[0]||{}})).finally((function(){e.loading=!1}))},uploadtimetable2:function(){var e=this;this.$refs.formtimetable2.validate().then((function(t){if(t){e.timetable_upload2.academic_year=Number(e.$route.params.id),e.timetable_upload2.type="for_teacher";for(var l=new FormData,o=0,n=Object.keys(e.timetable_upload2);o<n.length;o++){var d=n[o];l.append(d,e.timetable_upload2[d])}e.loading=!0,e.$axios({method:"POST",url:"/time_table/",data:l}).then((function(t){e.$Swal.fire({title:"Timetable has been saved!",type:"success"}),e.dialog_timetable=!1,e.$refs.formtimetable2.reset(),e.dialog_timetable_2=!1,e.getTimetableTeachers()})).catch((function(t){e.loading=!1;var l=t.response.data,o=Object.keys(l),n="string"==typeof l[o[0]]?l[o[0]]:l[o[0]][0];e.$Swal.fire({title:"Error",text:n||"error has occurred",type:"error"})})).finally((function(){e.loading=!1}))}}))}}},n=(l(1276),l(16)),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"time-table-teacher"},[l("b-card-text",[l("header",{staticClass:"d-flex align-items-center mb-3"},[l("h4",[e._v("Timetable for teachers")]),e._v(" "),["admin","super_admin","branch_admin"].includes(e.role)?l("b-button",{staticClass:"ml-auto",attrs:{variant:"success"},on:{click:function(t){e.dialog_timetable_2=!0}}},[l("i",{staticClass:"fas fa-plus-circle mr-1"}),e._v("\n                Upload timetable for teachers")]):e._e()],1),e._v(" "),!e.loading&&e.timeTableList.length?l("el-collapse",{staticClass:"acardion-gray",attrs:{accordion:""},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}},e._l(e.timeTableList,(function(t,i){return l("el-collapse-item",{key:i,attrs:{name:t.id}},[l("template",{slot:"title"},[l("div",{staticClass:"gradebook-accardion-title"},[l("h1",[e._v(" "+e._s(t.name)+" ")]),e._v(" "),l("p",{staticClass:"m-0 ml-1 font-12 color-green"},[e._v(" "+e._s(t.updated_at)+" ")])])]),e._v(" "),l("div",{staticClass:"gradebook-accardion-body"},[l("div",{staticClass:"time-table-card"},[l("div",{staticClass:"d-flex mb-2 mt-2 justify-content-between pr-1 pl-1"},[l("div",{staticClass:"d-flex"},[l("a",{staticClass:"mr-2 text-success",attrs:{href:t.file,download:""}},[l("i",{staticClass:"mdi mdi-arrow-down-bold mr-1"}),e._v("\n                                    "+e._s(t?t.name:"")+"\n                                ")]),e._v(" "),l("i",{staticClass:"text-muted"},[e._v("Uploaded date: "+e._s(t.updated_at))])]),e._v(" "),l("div",{staticClass:"d-flex"},[l("a",{staticClass:"mr-1 ml-1",attrs:{href:t.file,download:""}},[l("b-button",{attrs:{variant:"light"}},[l("i",{staticClass:"mdi mdi-arrow-down-bold mr-1"}),e._v(" Download\n                                    ")])],1),e._v(" "),["branch_admin"].includes(e.role)?l("b-button",{staticClass:"mr-1",attrs:{variant:"danger"},on:{click:function(l){return e.DeleteTimeTable(t.id)}}},[l("i",{staticClass:"mdi mdi-arrow-down-bold mr-1"}),e._v(" Delete\n                                ")]):e._e()],1)]),e._v(" "),t.file?l("iframe",{attrs:{src:"https://view.officeapps.live.com/op/embed.aspx?src="+t.file,width:"100%",height:"565px",frameborder:"0"}}):e._e()])])],2)})),1):e._e(),e._v(" "),e.loading?l("div",{staticClass:"table-loader",staticStyle:{height:"300px"}},[l("i",{staticClass:"el-icon-loading"}),e._v(" "),l("p",{staticClass:"m-0 mt-1"},[e._v("loading...")])]):e._e(),e._v(" "),e.loading||e.timeTableList.length?e._e():l("div",{staticClass:"table-loader",staticStyle:{height:"300px"}},[l("p",{staticClass:"m-0 mt-1"},[e._v("No file!")])])],1),e._v(" "),l("b-modal",{attrs:{size:"lg",id:"semester-view-modal",title:"Teachers Timetable","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.cancel;return[l("b-button",{class:{loading:e.loading},attrs:{size:"md",variant:"success",disabled:e.loading},on:{click:function(t){return e.uploadtimetable2()}}},[e._v("\n                Save\n            ")]),e._v(" "),l("b-button",{attrs:{size:"md"},on:{click:function(e){return o()}}},[e._v(" Close ")])]}}]),model:{value:e.dialog_timetable_2,callback:function(t){e.dialog_timetable_2=t},expression:"dialog_timetable_2"}},[l("ValidationObserver",{ref:"formtimetable2"},[l("div",{staticClass:"school-create-form"},[l("div",{staticClass:"item"},[l("p",{staticClass:"mb-1"},[e._v("Upload timetable:")]),e._v(" "),l("FoniyFileUpload",{attrs:{ext:["xls","xlsx"],disabled:!1},model:{value:e.timetable_upload2.file,callback:function(t){e.$set(e.timetable_upload2,"file",t)},expression:"timetable_upload2.file"}})],1)])])],1)],1)}),[],!1,null,"726b78b2",null);t.default=component.exports;installComponents(component,{FoniyFileUpload:l(968).default})},895:function(e,t,l){var content=l(962);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(53).default)("39800e11",content,!0,{sourceMap:!1})},961:function(e,t,l){"use strict";l(895)},962:function(e,t,l){var o=l(52)(!1);o.push([e.i,'.foniy-upload-file .foniy-file-upload-button{position:relative;display:flex;align-items:center;justify-content:space-between;padding:10px 15px;min-width:200px;border:1px solid #ced4da;border-radius:5px;overflow:hidden}.foniy-upload-file .foniy-file-upload-button p{font-family:"Roboto";font-style:normal;font-weight:600;font-size:14px;line-height:16px;margin:0 10px 0 0;width:calc(100% - 30px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;position:relative;z-index:0}.foniy-upload-file .foniy-file-upload-button-input{position:relative;flex:1;display:flex;align-items:center}.foniy-upload-file input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:1;cursor:pointer}',""]),e.exports=o},968:function(e,t,l){"use strict";l.r(t);var o={props:["value","disabled","ext"],data:function(){return{file:null}},watch:{value:{handler:function(e){this.fileList=e},immediate:!0},file:function(){this.$emit("input",this.file)}},methods:{UploadFile:function(e){this.file=e.target.files[0]}}},n=(l(961),l(16)),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"foniy-upload-file",class:{disabled:e.disabled}},[l("div",{staticClass:"foniy-file-upload-button"},[l("div",{staticClass:"foniy-file-upload-button-input"},[l("input",{class:{disabled:e.disabled},attrs:{type:"file",disabled:e.disabled,accept:e.ext},on:{input:e.UploadFile}}),e._v(" "),l("p",[e._v(e._s(e.file&&e.file.name?e.file.name:"Upload file"))]),e._v(" "),e.file&&e.file.name?l("i",{staticClass:"mdi mdi-pencil font-weight-bold color-green font-16"}):l("svg",{attrs:{width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[l("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9995 0C13.9795 0 16.4455 2.174 16.9125 5.021C19.7565 5.233 21.9995 7.602 21.9995 10.5C21.9995 13.537 19.5365 16 16.4995 16H4.99951C2.23851 16 -0.000488281 13.761 -0.000488281 11C-0.000488281 8.239 2.23851 6 4.99951 6C4.99951 2.686 7.68651 0 10.9995 0ZM14.6815 8.598L14.8885 8.391C15.0835 8.196 15.0835 7.879 14.8885 7.684L11.3535 4.148C11.1555 3.95 10.8445 3.951 10.6465 4.148L7.11151 7.684C6.91551 7.879 6.91551 8.196 7.11151 8.391L7.31851 8.598C7.41151 8.692 7.53851 8.745 7.67151 8.745H8.99951V12.5C8.99951 12.776 9.22351 13 9.49951 13H12.4995C12.7765 13 12.9995 12.776 12.9995 12.5V8.745H14.3275C14.4605 8.745 14.5875 8.692 14.6815 8.598Z",fill:e.file?"#0FBE7B":"#333333"}})])])])])}),[],!1,null,null,null);t.default=component.exports}}]);