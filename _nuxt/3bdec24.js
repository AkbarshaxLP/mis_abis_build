(window.webpackJsonp=window.webpackJsonp||[]).push([[211,41],{1307:function(t,e,n){"use strict";n.r(e);n(7),n(4),n(9),n(6),n(10);var o=n(0),r=(n(2),n(8),n(35)),l=n(840);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d={props:["showDialog"],computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.b)("dictionary",["dic_grade","dic_language"])),data:function(){return{search:null,show:!1,fields:[{key:"name",label:"Grade name",sortable:!0},{key:"options",label:"Grade options",sortable:!0},"Actions"],title:"Grade Types",items:[{text:"Grade Types",active:!0}],modalId:"add-grade",loading:!1,dialog:!1,editMethod:!1,form:{id:null,name:"",options:[{name:""}]}}},watch:{showDialog:function(t){this.editMethod||(this.form={id:null,name:"",options:[{name:""}]}),t||(this.editMethod=!1)}},mounted:function(){},methods:{rmItem:function(t){var e=this;this.$Swal.fire({title:"Do you want delete this grade?",type:"warning",showCancelButton:!0,confirmButtonText:"Delete!",cancelButtonText:"Cancel!",confirmButtonClass:"btn btn-danger mt-2",cancelButtonClass:"btn btn-info ml-2 mt-2",buttonsStyling:!1}).then((function(n){n.value&&(e.loading=!0,e.$axios.delete("/dictionary/grade/".concat(t,"/")).then((function(t){e.fetchItems(),e.$Swal.fire({title:"Deleted!",type:"success"})})).finally((function(){e.loading=!1})))}))},addOption:function(){this.form.options.push({name:""})},clearForm:function(){this.form={id:null,name:"",options:[{name:""}]}},setForm:function(t){this.form=Object(l.a)(t)},beforeClose:function(){this.form={id:null,name:"",options:[{name:""}]},this.$emit("dialog",!1)},save:function(){var t=this;this.$refs.form1.validate().then((function(e){if(e){t.loading=!0;var n=t.form.id,o=n?n+"/":"";t.$axios({url:"/dictionary/grade/"+o,method:n?"PATCH":"POST",data:t.form}).then((function(e){t.fetchItems(),t.show=!1})).catch((function(e){var n=e.response.data,o=n[Object.keys(n)[0]];t.$notify.error({message:o||"Произошла ошибка"})})).finally((function(){t.loading=!1}))}}))},fetchItems:function(){this.$store.dispatch("dictionary/dic_grade")},deleteItem:function(){var t=this;this.$confirm("Вы точно хотите удалить?",{confirmButtonText:"Да",cancelButtonText:"Отмена",type:"warning"}).then((function(){t.loading=!0;var e=t.form.id,n=e?e+"/":"";t.$axios.delete("/dictionary/grade/"+n).then((function(){t.fetchItems(),t.$message({type:"success",message:"Deleted"})})).finally((function(){t.loading=!1}))}))}}},f=d,m=n(16),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PageHeader",{attrs:{title:t.title,items:t.items}}),t._v(" "),n("div",{staticClass:"pb-2 w-full d-flex"},[n("button",{staticClass:"btn ml-auto text-white btn-success",on:{click:function(e){t.show=!0}}},[n("i",{staticClass:"mdi mdi-plus-circle mr-1"}),t._v("\n      Create Grade Type\n    ")])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row mb-md-2"},[n("div",{staticClass:"col-sm-12"},[n("div",{staticClass:"dataTables_filter",attrs:{id:"tickets-table_filter"}},[n("label",{staticClass:"d-inline-flex align-items-center"},[n("b-form-input",{staticClass:"form-control form-control-sm",attrs:{type:"search",placeholder:"Search..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])])]),t._v(" "),n("div",{staticClass:"table-responsive mb-0"},[t.loading?n("div",{staticClass:"card-disabled"},[t._m(0)]):t._e(),t._v(" "),n("b-table",{staticClass:"thead-light",attrs:{items:t.dic_grade,fields:t.fields,responsive:"sm"},scopedSlots:t._u([{key:"cell(options)",fn:function(data){return[n("u",[t._v("\n                  "+t._s(String(data.item.options.map((function(t){return t.name}))))+"\n                ")])]}},{key:"cell(Actions)",fn:function(data){return[n("ul",{staticClass:"list-inline table-action m-0"},[n("li",{staticClass:"list-inline-item",on:{click:function(e){t.form=JSON.parse(JSON.stringify(data.item)),t.show=!0}}},[n("a",{staticClass:"action-icon px-1",attrs:{href:"javascript:void(0);"}},[n("i",{staticClass:"mdi mdi-pencil"})])]),t._v(" "),n("li",{staticClass:"list-inline-item",on:{click:function(e){return t.rmItem(data.item.id)}}},[n("a",{staticClass:"action-icon px-1",attrs:{href:"javascript:void(0);"}},[n("i",{staticClass:"mdi mdi-delete"})])])])]}},{key:"table-colgroup",fn:function(e){return t._l(e.fields,(function(t){return n("col",{key:t.key,style:{width:"Actions"===t.key?"100px":""}})}))}}])})],1)])])])]),t._v(" "),n("b-modal",{attrs:{title:"Add Grade","title-class":"font-18","body-class":"p-4"},on:{hide:function(e){return t.clearForm()}},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var o=e.cancel;return[n("b-button",{attrs:{size:"md"},on:{click:function(t){return o()}}},[t._v(" Cancel ")]),t._v(" "),n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.save()}}},[t._v(" Save ")])]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("ValidationObserver",{ref:"form1"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Class Number")]),t._v(" "),n("b-form-input",{staticClass:"mb-2",class:{invalid:o[0]},attrs:{type:"text",placeholder:"For example: 9"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})]}}])}),t._v(" "),t._l(t.form.options,(function(e,o){return n("ValidationProvider",{key:o,attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var r=o.errors;return[n("p",{staticClass:"mb-1"},[t._v("Class Letter")]),t._v(" "),n("b-form-input",{staticClass:"mb-2",class:{invalid:r[0]},attrs:{placeholder:"For example: B",type:"text"},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}})]}}],null,!0)})})),t._v(" "),n("a",{staticClass:"btn text-success",on:{click:t.addOption}},[t._v(" + Add Option ")])],2)],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-portlets-loader"},[e("div",{staticClass:"spinner-border text-primary m-2",attrs:{role:"status"}})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{PageHeader:n(837).default})},837:function(t,e,n){"use strict";n.r(e);var o=n(35),r={components:{},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},computed:Object(o.c)(["layout"])},l=n(16),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"page-title-box",class:{"page-title-box-alt":"vertical"!==t.layout.layoutType&&"two-column"!==t.layout.layoutType}},[n("h4",{staticClass:"page-title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"page-title-right"},[n("b-breadcrumb",{staticClass:"m-0",attrs:{items:t.items}})],1)])])])}),[],!1,null,null,null);e.default=component.exports},840:function(t,e,n){"use strict";var o=n(26);n(256),n(2),n(6);e.a=function t(e){if(!e)return e;var n;if([Number,String,Boolean].forEach((function(t){e instanceof t&&(n=t(e))})),void 0===n)if("[object Array]"===Object.prototype.toString.call(e))n=[],e.forEach((function(e,o,r){n[o]=t(e)}));else if("object"==Object(o.a)(e))if(e.nodeType&&"function"==typeof e.cloneNode)n=e.cloneNode(!0);else if(e.prototype)n=e;else if(e instanceof Date)n=new Date(e);else for(var i in n={},e)n[i]=t(e[i]);else n=e;return n}}}]);