(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{966:function(t,e,n){"use strict";n.r(e);n(8),n(7),n(9),n(10);var r=n(0),l=(n(2),n(6),n(4),n(14),n(12),n(25),n(42),n(43),n(848),n(526),n(17),n(5)),o=n.n(l),c=n(35);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={computed:_(_({},Object(c.b)("dictionary",["dic_academic_year"])),{},{semester_list:function(){var t=this,data=[];return this.dic_academic_year.forEach((function(element){element.id==t.academic_year&&(element.semesters.forEach((function(e){e.current_semester?t.semester=e.id:t.semester=element.semesters[0].id})),data=element.semesters)})),data},cur_academic_year:function(){var t=this,data="";return this.dic_academic_year.forEach((function(element){data=element.current_academicyear?element.id:t.dic_academic_year[0].id})),this.academic_year=data,data},cur_semester:function(){var t=this,data="";return this.dic_academic_year.forEach((function(element){element.current_academicyear&&(t.academic_year=element.id,element.semesters.forEach((function(e){e.current_semester&&(data=e.id,t.semester=e.id)})))})),data},months_list:function(){var t=this;return this.month?this.gradeMonthsList.filter((function(e){return e.month_id==t.month})):this.gradeMonthsList}}),data:function(){return{loading:!1,weekDays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],month:"",semesterList:[],gradeMonthsList:[],current_semester:{},semester:0,gradeList:[],academic_year:"",academic_yearList:[],exelLoader:!1,week_list:[],week:"",weeklyData:{},semester_index:1}},watch:{semester:function(){this.month="",this._GetGrade()},month:function(){this.week="",this.weeklyData={},this._GetGrade()},cur_academic_year:function(t){this.academic_year=t}},methods:{_GetGrade:function(){var t=this;this.loading=!0,this.$axios.get("/gradebookadminlist/?student=".concat(this.$route.params.id,"&semester=").concat(this.semester,"&month=").concat(this.month)).then((function(e){t.gradeList=e.data.data,t.semester_index=e.data.semester_index,t.generateWeek(),t.gradeMonthsList=e.data.months})).finally((function(){t.loading=!1}))},_getDay:function(t){return t.split("-")[2]},checkCurDate:function(t){var e=new Date;return(e=o()(e).format("YYYY-MM-DD"))>=o()(this.formatDate(t)).format("YYYY-MM-DD")},formatDate:function(t){var a=t.split(".");return a=a[2]+"-"+a[1]+"-"+a[0]},DownloadExel:function(){var t=this;this.exelLoader=!0,this.$axios.get("/excelgradebook/?student=".concat(this.$route.params.id,"&semester=").concat(this.semester),{responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),link=document.createElement("a");link.href=e,link.setAttribute("download","Student.xlsx"),document.body.appendChild(link),link.click()})).finally((function(){t.exelLoader=!1}))},generateWeek:function(){var t=this,data=[],e="";this.gradeList.lesson[0].gradebook.forEach((function(element){var n=t.getMonday(element.gradebook_date,"monday"),r=t.getMonday(element.gradebook_date,"sunday");n!=e&&(data.push({start:n,end:r}),e=n)})),this.week_list=data.map((function(t){return t}))},getMonday:function(data,t){var e=data;if(e=o()(e).format("YYYY-MM-DD"),e=new Date(e),"monday"==t)if(0==e.getDay())e=e.setDate(e.getDate()-6),e=o()(e).format("YYYY-MM-DD");else{var n=e.getDate()-e.getDay()+1;e=new Date(e.setDate(n)),e=o()(e).format("YYYY-MM-DD")}if("sunday"==t)if(0==e.getDay())e=e.setDate(e.getDate()),e=o()(e).format("YYYY-MM-DD");else{var r=e.getDate()-e.getDay()+7;e=new Date(e.setDate(r)),e=o()(e).format("YYYY-MM-DD")}return e},generateWeeklyData:function(){var t=this;if(this.week){var e=[],n=[];this.gradeList.lesson.forEach((function(r){n=[],r.gradebook.forEach((function(e){e.gradebook_date>=t.week_list[t.week-1].start&&e.gradebook_date<=t.week_list[t.week-1].end&&n.push(e)})),e.push(_(_({},r),{},{gradebook:n}))})),this.weeklyData={id:this.gradeList.id,first_name:this.gradeList.first_name,last_name:this.gradeList.last_name,middle_name:this.gradeList.middle_name,lesson:e}}},getNumberOfDays:function(t,e){var n=new Date(t),r=new Date(e).getTime()-n.getTime();return Math.round(r/864e5)}},created:function(){this.cur_semester&&(this.semester=this.cur_semester?this.cur_semester:this.semester_list[0].id),this.cur_academic_year&&(this.academic_year=this.cur_academic_year),this.cur_semester&&this.cur_academic_year&&this._GetGrade()}},h=n(16),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"student-gradebook"},[n("div",{staticClass:"d-flex justify-content-between"},[n("h1",{staticClass:"font-18 mb-3 mt-3"},[t._v(" "+t._s(t._f("fio")(t.gradeList))+" ")]),t._v(" "),n("div",{staticClass:"d-flex aligin-items-center"},[n("el-select",{staticClass:" w-full ml-1",attrs:{placeholder:"Academic Year"},model:{value:t.academic_year,callback:function(e){t.academic_year=e},expression:"academic_year"}},t._l(t.dic_academic_year,(function(t,i){return n("el-option",{key:i,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),n("el-select",{staticClass:" w-full ml-1",attrs:{placeholder:"Term"},model:{value:t.semester,callback:function(e){t.semester=e},expression:"semester"}},t._l(t.semester_list,(function(e,i){return n("el-option",{key:i,attrs:{label:i+1+"-term",value:e.id,disabled:!t.checkCurDate(e.start_semester)}})})),1),t._v(" "),n("el-select",{staticClass:" w-full ml-1",attrs:{placeholder:"Months",clearable:""},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},t._l(t.gradeMonthsList,(function(t,i){return n("el-option",{key:i,attrs:{label:""+t.month_name,value:t.month_id}})})),1),t._v(" "),n("el-select",{staticClass:" w-full ml-1",attrs:{disabled:!t.month,placeholder:"Week",clearable:""},on:{change:function(e){return t.generateWeeklyData()}},model:{value:t.week,callback:function(e){t.week=e},expression:"week"}},t._l(t.week_list,(function(t,i){return n("el-option",{key:i,attrs:{label:i+1+"-week",value:i+1}})})),1),t._v(" "),n("div",[n("b-button",{staticClass:"ml-1",staticStyle:{"min-width":"150px"},attrs:{variant:"light",disabled:t.exelLoader},on:{click:function(e){return t.DownloadExel()}}},[t.exelLoader?n("i",{staticClass:"el-icon-loading"}):n("i",{staticClass:"mdi mdi-download mr-1"}),t._v("\n                    Download")])],1)],1)]),t._v(" "),t.gradeList&&t.gradeList.lesson&&t.gradeList.lesson[0]&&t.gradeList.lesson[0].gradebook&&!t.loading?n("div",{staticClass:"foniy-table",staticStyle:{"max-height":"600px"}},[t.week&&t.weeklyData.lesson&&t.weeklyData.lesson[0]&&t.weeklyData.lesson[0].gradebook?n("table",{staticClass:"border-all"},[n("tr",[t._m(0),t._v(" "),n("th",{attrs:{colspan:t.weeklyData.lesson[0].gradebook.length+2}},[n("p",{staticClass:"font-weight-bold text-center m-0"},[t._v("ABIS INTERNATIONAL - SCHOOL GRADEBOOK")])])]),t._v(" "),n("tr",[n("th",{staticStyle:{"min-width":"280px"},attrs:{colspan:"2"}},[n("p",{staticClass:" font-weight-bold color-primary m-0 "},[t._v(" "+t._s(t._f("fio")(t.gradeList))+" ")])]),t._v(" "),n("th",{attrs:{colspan:t.weeklyData.lesson[0].gradebook.length}},[n("p",{staticClass:" font-weight-bold  text-center m-0"},[t._v(t._s(t.months_list[0].month_name)+" - "+t._s(t.months_list[0].year)+" ")])]),t._v(" "),n("th",{attrs:{colspan:[2,4].includes(t.semester_index)?3:1}},[n("p",{staticClass:"font-16  m-0 font-weight-bold text-center"},[t._v("Percentage")])]),t._v(" "),n("th",{attrs:{colspan:[2,4].includes(t.semester_index)?3:1}},[n("p",{staticClass:"font-16  m-0 font-weight-bold text-center"},[t._v("Grade")])])]),t._v(" "),n("tr",[t._m(1),t._v(" "),t._m(2),t._v(" "),t._l(t.weeklyData.lesson[0].gradebook,(function(e,i){return n("td",{key:i,staticClass:"text-center",class:{"bg-gray":5==e.weekday_id||6==e.weekday_id},staticStyle:{"min-height":"50px","min-width":"60px"}},[n("p",{staticClass:"m-0 mb-1 font-weight-bold",class:{"color-red":6==e.weekday_id,"color-orange":5==e.weekday_id}},[t._v(" "+t._s(t.weekDays[e.weekday_id])+" ")]),t._v(" "),n("p",{staticClass:"m-0",class:{"color-red":6==e.weekday_id,"color-orange":5==e.weekday_id}},[t._v(" "+t._s(t._getDay(e.gradebook_date)))])])})),t._v(" "),[1,3].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0   font-weight-bold"},[t._v("\n                        Total Av\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0   font-weight-bold"},[t._v("\n                        AFG(60)\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0 font-weight-bold"},[t._v("\n                        Exam(40)\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0 font-weight-bold"},[t._v("\n                        Total Grade\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0  font-weight-bold"},[t._v("\n                        Formative Grade\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0  font-weight-bold"},[t._v("\n                        Summative Grade\n                    ")])]):t._e(),t._v(" "),t._m(3)],2),t._v(" "),t._l(t.weeklyData.lesson,(function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(e.subject_name)+" ")]),t._v(" "),n("td",[t._v(t._s(e.main_teacher_name)+" ")]),t._v(" "),t._l(e.gradebook,(function(e,i){return n("td",{key:i,staticClass:"text-center",class:{"bg-gray":5==e.weekday_id||6==e.weekday_id},staticStyle:{"min-height":"50px","min-width":"60px"}},[t._v(" "+t._s(e.gradebook))])})),t._v(" "),[1,3].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.total_av)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.afg)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.exam)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.total_grade)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v(" "+t._s(e.formative_grade)+" ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v(" "+t._s(e.summative_grade)+" ")])]):t._e(),t._v(" "),n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v(" "+t._s(e.end_of_term_grade)+" ")])])],2)}))],2):n("table",{staticClass:"border-all"},[n("tr",[t._m(4),t._v(" "),t._l(t.months_list,(function(e){return n("th",{key:e.month_id,attrs:{colspan:e.days_count+2}},[n("p",{staticClass:"font-weight-bold text-center m-0"},[t._v("ABIS INTERNATIONAL - SCHOOL GRADEBOOK")])])}))],2),t._v(" "),n("tr",[n("th",{staticStyle:{"min-width":"280px"},attrs:{colspan:"2"}},[n("p",{staticClass:" font-weight-bold color-primary m-0 "},[t._v(" "+t._s(t._f("fio")(t.gradeList))+" ")])]),t._v(" "),t._l(t.months_list,(function(e){return n("th",{key:e.month_id,attrs:{colspan:e.days_count}},[n("p",{staticClass:" font-weight-bold  text-center m-0"},[t._v(t._s(e.month_name)+" - "+t._s(e.year))])])})),t._v(" "),n("th",{attrs:{colspan:[2,4].includes(t.semester_index)?3:1}},[n("p",{staticClass:"font-16  m-0 font-weight-bold text-center"},[t._v("Percentage")])]),t._v(" "),n("th",{attrs:{colspan:[2,4].includes(t.semester_index)?3:1}},[n("p",{staticClass:"font-16  m-0 font-weight-bold text-center"},[t._v("Grade")])])],2),t._v(" "),n("tr",[t._m(5),t._v(" "),t._m(6),t._v(" "),t._l(t.gradeList.lesson[0].gradebook,(function(e,i){return n("td",{key:i,staticClass:"text-center",class:{"bg-gray":5==e.weekday_id||6==e.weekday_id},staticStyle:{"min-height":"50px","min-width":"60px"}},[n("p",{staticClass:"m-0 mb-1 font-weight-bold",class:{"color-red":6==e.weekday_id,"color-orange":5==e.weekday_id}},[t._v(" "+t._s(t.weekDays[e.weekday_id])+" ")]),t._v(" "),n("p",{staticClass:"m-0",class:{"color-red":6==e.weekday_id,"color-orange":5==e.weekday_id}},[t._v(" "+t._s(t._getDay(e.gradebook_date)))])])})),t._v(" "),[1,3].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0   font-weight-bold"},[t._v("\n                        Total Av\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0   font-weight-bold"},[t._v("\n                        AFG(60)\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0 font-weight-bold"},[t._v("\n                        Exam(40)\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0 font-weight-bold"},[t._v("\n                        Total Grade\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0  font-weight-bold"},[t._v("\n                        Formative Grade\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0  font-weight-bold"},[t._v("\n                        Summative Grade\n                    ")])]):t._e(),t._v(" "),t._m(7)],2),t._v(" "),t._l(t.gradeList.lesson,(function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(e.subject_name)+" ")]),t._v(" "),n("td",[t._v(t._s(e.main_teacher_name)+" ")]),t._v(" "),t._l(e.gradebook,(function(e,i){return n("td",{key:i,staticClass:"text-center",class:{"bg-gray":5==e.weekday_id||6==e.weekday_id},staticStyle:{"min-height":"50px","min-width":"60px"}},[t._v(" "+t._s(e.gradebook))])})),t._v(" "),[1,3].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.total_av)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.afg)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.exam)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v("\n                        "+t._s(e.total_grade)+"\n                    ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v(" "+t._s(e.formative_grade)+" ")])]):t._e(),t._v(" "),[2,4].includes(t.semester_index)?n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v(" "+t._s(e.summative_grade)+" ")])]):t._e(),t._v(" "),n("td",{staticClass:"bg-yellow"},[n("p",{staticClass:"font-14 text-center m-0 font-weight-normal"},[t._v(" "+t._s(e.end_of_term_grade)+" ")])])],2)}))],2)]):t._e(),t._v(" "),t.loading?n("div",{staticClass:"table-loader",staticStyle:{height:"500px"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" "),n("p",{staticClass:"m-0 mt-1"},[t._v("loading...")])]):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{attrs:{colspan:"2"}},[n("p",{staticClass:" font-weight-bold m-0"},[t._v(" Name Surname")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("p",{staticClass:" font-weight-bold m-0"},[t._v("Subjects")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("p",{staticClass:" font-weight-bold m-0"},[t._v("Teachers")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0  font-weight-bold"},[t._v("\n                        End of Term Grade\n                    ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{attrs:{colspan:"2"}},[n("p",{staticClass:" font-weight-bold m-0"},[t._v(" Name Surname")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("p",{staticClass:" font-weight-bold m-0"},[t._v("Subjects")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("p",{staticClass:" font-weight-bold m-0"},[t._v("Teachers")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{staticClass:"bg-yellow",staticStyle:{"min-width":"70px",width:"70px"}},[n("p",{staticClass:"font-12 text-center m-0  font-weight-bold"},[t._v("\n                        End of Term Grade\n                    ")])])}],!1,null,null,null);e.default=component.exports}}]);