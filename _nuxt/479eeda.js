(window.webpackJsonp=window.webpackJsonp||[]).push([[64,34],{1099:function(t,e,l){var content=l(1275);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(53).default)("665e685a",content,!0,{sourceMap:!1})},1274:function(t,e,l){"use strict";l(1099)},1275:function(t,e,l){var o=l(52)(!1);o.push([t.i,'.timetable-header .item[data-v-709a0b71]{margin-top:24px}.timetable-header .item p[data-v-709a0b71]{font-weight:500;font-size:10px;text-transform:uppercase;color:#6e768e;margin-bottom:4px}.timetable-header .item p[data-v-709a0b71],.timetable-header .item span[data-v-709a0b71]{font-family:"Roboto";font-style:normal;line-height:16px}.timetable-header .item span[data-v-709a0b71]{font-weight:400;font-size:14px;color:#2b2d33;line-height:normal}.group-view-header[data-v-709a0b71]{display:flex;align-items:center}.group-view-header h1[data-v-709a0b71]{font-family:"Roboto";font-style:normal;font-weight:700;font-size:18px;line-height:21px;color:#2b2d33;flex:1}.gradebook-accardion-title[data-v-709a0b71]{display:flex;align-items:center}.gradebook-accardion-title h1[data-v-709a0b71]{margin:0;font-family:"Roboto";font-style:normal;font-weight:500;font-size:14px;line-height:16px;color:#2b2d33}.gradebook-accardion-body[data-v-709a0b71]{border:1px solid #e9eaea}.gradebook-accardion-body p[data-v-709a0b71]{margin:0;font-family:"Roboto";font-size:14px;line-height:16px;color:#2b2d33}',""]),t.exports=o},1455:function(t,e,l){"use strict";l.r(e);l(22),l(2),l(256),l(8);var o={data:function(){return{dic_timetable:{},timeTableList:[],loading:!1,index:1,timetable1:{file:null},timetable2:{file:null},timetable_upload1:{file:null},timetable_upload2:{file:null},dialog_timetable_1:!1,dialog_timetable_2:!1,form:{academic_year:null},rows:{results:[]},attach_form:{group:null,student:[]},students:{results:[]}}},computed:{role:function(){var t;return null===(t=this.$store.state.auth.user)||void 0===t?void 0:t.role.name}},created:function(){this.getTimetable()},methods:{DeleteTimeTable:function(t){var e=this;this.index=0,this.$axios.delete("/time_table/".concat(t,"/")).then((function(){e.getTimetable()}))},getTimetable:function(){var t=this,e=this.$route.params.id;this.loading=!0,this.$axios.get("/time_table/?academic_year=".concat(e,"&type=all_users&limit=1000")).then((function(e){t.timeTableList=e.data.results,t.timetable1=e.data[0]||{}})).finally((function(){t.loading=!1}))},uploadtimetable1:function(){var t=this;this.$refs.formtimetable1.validate().then((function(e){if(e){t.timetable_upload1.academic_year=Number(t.$route.params.id),t.timetable_upload1.type="all_users";for(var l=new FormData,o=0,n=Object.keys(t.timetable_upload1);o<n.length;o++){var d=n[o];l.append(d,t.timetable_upload1[d])}t.loading=!0,t.$axios({method:"POST",url:"/time_table/",data:l}).then((function(e){t.$Swal.fire({title:"Timetable has been saved!",type:"success"}),t.dialog_timetable=!1,t.dialog_timetable_1=!1,t.getTimetable(),t.$refs.formtimetable1.reset()})).catch((function(e){t.loading=!1;var l=e.response.data,o=Object.keys(l),n="string"==typeof l[o[0]]?l[o[0]]:l[o[0]][0];t.$Swal.fire({title:"Error",text:n||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))}}},n=(l(1274),l(16)),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"time-table-teacher"},[l("b-card-text",[l("header",{staticClass:"d-flex align-items-center mb-3"},[l("h4",[t._v("Timetable for All users")]),t._v(" "),["admin","super_admin","branch_admin"].includes(t.role)?l("b-button",{staticClass:"ml-auto",attrs:{variant:"success"},on:{click:function(e){t.dialog_timetable_1=!0}}},[l("i",{staticClass:"fas fa-plus-circle mr-1"}),t._v("\n                Upload timetable")]):t._e()],1),t._v(" "),!t.loading&&t.timeTableList.length?l("el-collapse",{staticClass:"acardion-gray",attrs:{accordion:""},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.timeTableList,(function(e,i){return l("el-collapse-item",{key:i,attrs:{name:e.id}},[l("template",{slot:"title"},[l("div",{staticClass:"gradebook-accardion-title"},[l("h1",[t._v(" "+t._s(e.name)+" ")]),t._v(" "),l("p",{staticClass:"m-0 ml-1 font-12 color-green"},[t._v(" "+t._s(e.updated_at)+" ")])])]),t._v(" "),l("div",{staticClass:"gradebook-accardion-body"},[l("div",{staticClass:"time-table-card"},[l("div",{staticClass:"d-flex mb-2 mt-2 justify-content-between pr-1 pl-1"},[l("div",{staticClass:"d-flex"},[l("a",{staticClass:"mr-2 text-success",attrs:{href:e.file,download:""}},[l("i",{staticClass:"mdi mdi-arrow-down-bold mr-1"}),t._v("\n                                    "+t._s(e?e.name:"")+"\n                                ")]),t._v(" "),l("i",{staticClass:"text-muted"},[t._v("Uploaded date: "+t._s(e.updated_at))])]),t._v(" "),l("div",{staticClass:"d-flex"},[l("a",{staticClass:"mr-1 ml-1",attrs:{href:e.file,download:""}},[l("b-button",{attrs:{variant:"light"}},[l("i",{staticClass:"mdi mdi-arrow-down-bold mr-1"}),t._v(" Download\n                                    ")])],1),t._v(" "),["branch_admin"].includes(t.role)?l("b-button",{staticClass:"mr-1",attrs:{variant:"danger"},on:{click:function(l){return t.DeleteTimeTable(e.id)}}},[l("i",{staticClass:"mdi mdi-arrow-down-bold mr-1"}),t._v(" Delete\n                                ")]):t._e()],1)]),t._v(" "),e.file?l("iframe",{attrs:{src:"https://view.officeapps.live.com/op/embed.aspx?src="+e.file,width:"100%",height:"565px",frameborder:"0"}}):t._e()])])],2)})),1):t._e(),t._v(" "),t.loading?l("div",{staticClass:"table-loader",staticStyle:{height:"300px"}},[l("i",{staticClass:"el-icon-loading"}),t._v(" "),l("p",{staticClass:"m-0 mt-1"},[t._v("loading...")])]):t._e(),t._v(" "),t.loading||t.timeTableList.length?t._e():l("div",{staticClass:"table-loader",staticStyle:{height:"300px"}},[l("p",{staticClass:"m-0 mt-1"},[t._v("No file!")])])],1),t._v(" "),l("b-modal",{attrs:{size:"lg",id:"semester-view-modal",title:"General Timetable file","no-close-on-backdrop":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var o=e.cancel;return[l("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.uploadtimetable1()}}},[t._v("\n                Save\n            ")]),t._v(" "),l("b-button",{attrs:{size:"md"},on:{click:function(t){return o()}}},[t._v(" Close ")])]}}]),model:{value:t.dialog_timetable_1,callback:function(e){t.dialog_timetable_1=e},expression:"dialog_timetable_1"}},[l("ValidationObserver",{ref:"formtimetable1"},[l("div",{staticClass:"school-create-form"},[l("div",{staticClass:"item"},[l("p",{staticClass:"mb-1"},[t._v("Upload timetable:")]),t._v(" "),l("FoniyFileUpload",{attrs:{ext:["xls","xlsx"],diabled:t.loading},model:{value:t.timetable_upload1.file,callback:function(e){t.$set(t.timetable_upload1,"file",e)},expression:"timetable_upload1.file"}})],1)])])],1)],1)}),[],!1,null,"709a0b71",null);e.default=component.exports;installComponents(component,{FoniyFileUpload:l(968).default})},895:function(t,e,l){var content=l(962);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(53).default)("39800e11",content,!0,{sourceMap:!1})},961:function(t,e,l){"use strict";l(895)},962:function(t,e,l){var o=l(52)(!1);o.push([t.i,'.foniy-upload-file .foniy-file-upload-button{position:relative;display:flex;align-items:center;justify-content:space-between;padding:10px 15px;min-width:200px;border:1px solid #ced4da;border-radius:5px;overflow:hidden}.foniy-upload-file .foniy-file-upload-button p{font-family:"Roboto";font-style:normal;font-weight:600;font-size:14px;line-height:16px;margin:0 10px 0 0;width:calc(100% - 30px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;position:relative;z-index:0}.foniy-upload-file .foniy-file-upload-button-input{position:relative;flex:1;display:flex;align-items:center}.foniy-upload-file input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:1;cursor:pointer}',""]),t.exports=o},968:function(t,e,l){"use strict";l.r(e);var o={props:["value","disabled","ext"],data:function(){return{file:null}},watch:{value:{handler:function(t){this.fileList=t},immediate:!0},file:function(){this.$emit("input",this.file)}},methods:{UploadFile:function(t){this.file=t.target.files[0]}}},n=(l(961),l(16)),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"foniy-upload-file",class:{disabled:t.disabled}},[l("div",{staticClass:"foniy-file-upload-button"},[l("div",{staticClass:"foniy-file-upload-button-input"},[l("input",{class:{disabled:t.disabled},attrs:{type:"file",disabled:t.disabled,accept:t.ext},on:{input:t.UploadFile}}),t._v(" "),l("p",[t._v(t._s(t.file&&t.file.name?t.file.name:"Upload file"))]),t._v(" "),t.file&&t.file.name?l("i",{staticClass:"mdi mdi-pencil font-weight-bold color-green font-16"}):l("svg",{attrs:{width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[l("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9995 0C13.9795 0 16.4455 2.174 16.9125 5.021C19.7565 5.233 21.9995 7.602 21.9995 10.5C21.9995 13.537 19.5365 16 16.4995 16H4.99951C2.23851 16 -0.000488281 13.761 -0.000488281 11C-0.000488281 8.239 2.23851 6 4.99951 6C4.99951 2.686 7.68651 0 10.9995 0ZM14.6815 8.598L14.8885 8.391C15.0835 8.196 15.0835 7.879 14.8885 7.684L11.3535 4.148C11.1555 3.95 10.8445 3.951 10.6465 4.148L7.11151 7.684C6.91551 7.879 6.91551 8.196 7.11151 8.391L7.31851 8.598C7.41151 8.692 7.53851 8.745 7.67151 8.745H8.99951V12.5C8.99951 12.776 9.22351 13 9.49951 13H12.4995C12.7765 13 12.9995 12.776 12.9995 12.5V8.745H14.3275C14.4605 8.745 14.5875 8.692 14.6815 8.598Z",fill:t.file?"#0FBE7B":"#333333"}})])])])])}),[],!1,null,null,null);e.default=component.exports}}]);