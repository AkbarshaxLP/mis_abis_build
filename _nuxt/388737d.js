(window.webpackJsonp=window.webpackJsonp||[]).push([[181,35,41],{1090:function(t,e,n){var content=n(1255);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("3527f6c1",content,!0,{sourceMap:!1})},1091:function(t,e,n){var content=n(1257);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("6342dc28",content,!0,{sourceMap:!1})},1254:function(t,e,n){"use strict";n(1090)},1255:function(t,e,n){var r=n(52)(!1);r.push([t.i,".ql-container.ql-snow{display:flex;flex-direction:column}.ql-container.ql-snow .ql-editor{flex:auto;max-width:100%}",""]),t.exports=r},1256:function(t,e,n){"use strict";n(1091)},1257:function(t,e,n){var r=n(52)(!1);r.push([t.i,".subject-type[data-v-0e27d6c0]{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}.subject-type.bg-blue[data-v-0e27d6c0]{background:#08c}.subject-type.bg-primary[data-v-0e27d6c0]{background:#66307f}.subject-type.bg-orange[data-v-0e27d6c0]{background:#ffa10a}.subject-type.bg-green[data-v-0e27d6c0]{background:#7ce883}.card[data-v-0e27d6c0]{min-height:100%}.page-footer[data-v-0e27d6c0]{width:100%;background:#fff;position:relative;display:flex;align-items:center;justify-content:flex-end;padding:15px 20px;border:1px solid #e7eaed;border-radius:.25rem}",""]),t.exports=r},1443:function(t,e,n){"use strict";n.r(e);n(7),n(4),n(9),n(10);var r=n(0);n(22),n(8),n(47),n(2),n(6),n(171);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={props:["sender"],components:{FoniyUploadFile:n(846).default},data:function(){return{loading:!1,loader:!1,title:"New Message",subject:{},roleKeys:{branch_admin:"Adm",teacher:"T",student:"S",parent:"P"},bgKeys:{branch_admin:"bg-green",teacher:"bg-blue",student:"bg-primary",parent:"bg-orange"},items:[{text:"New Message",active:!0}],message:{subject:"",description:"",mailbox_attachments:[]},editorOption:{theme:"snow",modules:{toolbar:[[{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{header:[!1,1,2,3,4,5,6]},"blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["direction",{align:[]}],["link","image","video"],["clean"]]}},list:[{id:"1",name:"Alisher P.A",type:"teacher"},{id:"2",name:"Akbar P.A",type:"student"},{id:"3",name:"Baxodir P.A",type:"parents"}],users_list:[],userTo:{}}},computed:{role:function(){var t;return null===(t=this.$store.state.auth.user)||void 0===t?void 0:t.role.name},me:function(){return this.$store.state.auth.user}},created:function(){this.userTo={id:this.$route.params.id,first_name:this.$route.query.first_name,last_name:this.$route.query.last_name,middle_name:this.$route.query.middle_name,role:this.$route.query.role}},methods:{save:function(){var t=this;this.$refs.message.validate().then((function(e){if(e){for(var data=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t.message),n=new FormData,l=["mailbox_attachments"],c=0,d=Object.keys(data);c<d.length;c++){var f=d[c];l.includes(f)||n.append(f,data[f])}for(var i in n.append("all_users",[t.$route.params.id]),data.mailbox_attachments)n.append("mailbox_attachments[".concat(i,"]file"),data.mailbox_attachments[i].file);t.loading=!0,t.$axios.post("/mailbox/",n).then((function(e){t.$Swal.fire({title:"The message has been sent!",type:"success"}).then((function(){t.$router.push("/email/reademail/".concat(e.data.id,"?my_msg=true"))}))})).catch((function(){t.$swal.fire({icon:"error",title:"Email is not sent!",text:"Server is not working! Please try again leter.",confirmButtonText:"Ok",timer:1500})})).finally((function(){t.loading=!1}))}else console.log("AAA")}))},SetData:function(t,e,n){this.message.all_users.push({id:t,role:e,name:n})},SelectUser:function(t){this.CheckDisabled(t.id)||this.message.all_users.push(t)},CheckDisabled:function(t){var a=!1;return this.message.all_users.forEach((function(element){element.id==t&&(a=!0)})),a},DeletArray:function(i){this.message.all_users.splice(i,1)},remoteMethod:function(t){var e=this;""!==t?(this.loader=!0,this.$axios.get("/search_users/?search=".concat(t)).then((function(t){e.users_list=t.data})).finally((function(){e.loader=!1}))):this.users_list=[]}},mounted:function(){},middleware:"auth"},c=l,d=(n(1254),n(1256),n(16)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("PageHeader",{attrs:{title:t.title,items:t.items}}),t._v(" "),n("ValidationObserver",{ref:"message"},[n("div",{staticClass:"row pb-4"},[n("div",{staticClass:"col-md-8"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h1",{staticClass:"mTitle mb-3"},[t._v("New Message")]),t._v(" "),n("div",{staticClass:"item mb-3"},[n("p",{staticClass:"mb-1"},[n("strong",[t._v(" Subject:*")])]),t._v(" "),n("ValidationProvider",{staticClass:"mr-2 w-full",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("b-input",{class:{invalid:r[0]},model:{value:t.message.subject,callback:function(e){t.$set(t.message,"subject",e)},expression:"message.subject"}})]}}])})],1),t._v(" "),n("div",{staticClass:"item mb-3"},[n("p",{staticClass:"mb-1"},[n("strong",[t._v(" Message:* ")])]),t._v(" "),n("ValidationProvider",{staticClass:"mr-2 w-full",staticStyle:{position:"relative"},attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("quill-editor",{class:{invalid:r[0]},staticStyle:{"min-height":"250px","max-width":"max-content"},attrs:{options:t.editorOption},model:{value:t.message.description,callback:function(e){t.$set(t.message,"description",e)},expression:"message.description"}})]}}])})],1),t._v(" "),n("div",{staticClass:"item mb-3"},[n("p",{staticClass:"mb-1"},[n("strong",[t._v("Attachments:")])]),t._v(" "),n("FoniyUploadFile",{model:{value:t.message.mailbox_attachments,callback:function(e){t.$set(t.message,"mailbox_attachments",e)},expression:"message.mailbox_attachments"}})],1)])])]),t._v(" "),n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"item mb-3"},[n("p",{staticClass:"mb-1"},[n("strong",[t._v("From:")])]),t._v(" "),n("b-button",{staticClass:"btn-rounded mb-1 mr-1",attrs:{variant:"light"}},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"subject-type mr-2",class:t.bgKeys[t.role]},[t._v(t._s(t.roleKeys[t.role]))]),t._v(" "),[t._v("Me")]],2)])],1),t._v(" "),n("div",{staticClass:"item mb-3"},[n("p",{staticClass:"mb-1"},[n("strong",[t._v("To:")])]),t._v(" "),n("b-button",{staticClass:"btn-rounded mb-1 mr-1",attrs:{variant:"light"}},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"subject-type mr-2",class:t.bgKeys[t.userTo.role]},[t._v(t._s(t.roleKeys[t.userTo.role]))]),t._v(" "),[t._v(" "+t._s(t._f("fio")(t.userTo))+" ")]],2)])],1)])])])]),t._v(" "),n("div",{staticClass:"page-footer fixed"},[n("div",{staticClass:"flex-box"},[n("b-button",{attrs:{size:"md"},on:{click:function(e){return t.$router.go(-1)}}},[t._v(" Cancel ")]),t._v(" "),n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.save()}}},[t._v("Send "),n("i",{staticClass:"mdi mdi-send ml-2"})])],1)])])],1)}),[],!1,null,"0e27d6c0",null);e.default=component.exports;installComponents(component,{PageHeader:n(837).default,FoniyUploadFile:n(846).default})},837:function(t,e,n){"use strict";n.r(e);var r=n(35),o={components:{},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},computed:Object(r.c)(["layout"])},l=n(16),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"page-title-box",class:{"page-title-box-alt":"vertical"!==t.layout.layoutType&&"two-column"!==t.layout.layoutType}},[n("h4",{staticClass:"page-title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"page-title-right"},[n("b-breadcrumb",{staticClass:"m-0",attrs:{items:t.items}})],1)])])])}),[],!1,null,null,null);e.default=component.exports},845:function(t,e,n){var content=n(855);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("0b28fe11",content,!0,{sourceMap:!1})},846:function(t,e,n){"use strict";n.r(e);n(22),n(14),n(171),n(19),n(2),n(58),n(42),n(12),n(7),n(57),n(62),n(43);function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,l=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw l}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l={props:["value","delete","one"],data:function(){return{fileList:[]}},watch:{value:{handler:function(t){this.fileList=t},immediate:!0},fileList:function(){this.$emit("input",this.fileList)}},methods:{dragFile:function(t){if(this.one){var e=t.dataTransfer.files[0];this.fileList.push({name:e.name,file:e,loader:!1})}else{var n,o=r(t.dataTransfer.files);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.fileList.push({name:i.name,file:i,loader:!1})}}catch(t){o.e(t)}finally{o.f()}}},inputFile:function(t){if(this.one){var e=t.target.files[0];this.fileList.push({name:e.name,file:e,loader:!1})}else{var n,o=r(t.target.files);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.fileList.push({name:i.name,file:i,loader:!1})}}catch(t){o.e(t)}finally{o.f()}}},UploadOneFile:function(){},deleteFile:function(i){var t=this;this.fileList[i].id?(this.fileList[i].loader=!0,this.$axios.delete("".concat(this.delete).concat(this.fileList[i].id)).then((function(){t.fileList.splice(i,1)})).catch((function(){t.fileList[i].loader=!0}))):this.fileList.splice(i,1)}}},c=(n(854),n(16)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"foniy-drag-uploads"},[!t.one||t.one&&0==t.fileList.length?r("div",{staticClass:"foniy-drop-file",on:{drop:[t.dragFile,function(t){t.preventDefault()}],dragover:function(t){t.preventDefault()}}},[r("img",{attrs:{src:n(851),alt:""}}),t._v(" "),r("h1",[t._v("Drop files here or click to upload")]),t._v(" "),r("p",[t._v("(Recommended: zip, Rar, PDF, DOCX, PPTX, XLSX, JPEG, JPG, PNG)")]),t._v(" "),r("input",{attrs:{type:"file",multiple:!t.one},on:{input:t.inputFile}})]):t._e(),t._v(" "),r("div",{staticClass:"foniy-drag-uploads-list"},t._l(t.fileList,(function(e,o){return r("div",{key:o,staticClass:"foniy-drag-uploads-list-item"},[r("div",{staticClass:"foniy-drag-uploads-list-content"},[r("div",{staticClass:"foniy-file-link"},[r("a",{attrs:{href:e.link?e.link:e.file}},[r("img",{attrs:{src:n(852),alt:""}}),t._v(" "),r("p",[t._v(t._s(e.name))])])]),t._v(" "),e.loader?r("button",[r("i",{staticClass:"el-icon-loading"})]):r("el-popconfirm",{attrs:{"confirm-button-text":"OK","cancel-button-text":"No, Thanks","icon-color":"red",title:"Are you sure to delete this File?"},on:{confirm:function(e){return t.deleteFile(o)}}},[r("button",{attrs:{slot:"reference"},slot:"reference"},[r("img",{attrs:{src:n(853),alt:""}})])])],1)])})),0)])}),[],!1,null,null,null);e.default=component.exports},851:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE5LjYzNSAzMEg5TDE4IDIxTDIwLjgyIDIzLjgyQzIxLjc1IDIyLjM1IDIzLjA0IDIxLjE1IDI0LjYgMjAuNEwyNyAxOFYxOS42MzVDMjcuNDk1IDE5LjU2IDI3Ljk5IDE5LjUgMjguNSAxOS41QzI5LjAxIDE5LjUgMjkuNTA1IDE5LjU2IDMwIDE5LjYzNVYxMkwyMSAzSDlDNy4zMzUgMyA2IDQuMzM1IDYgNlYzMEM2IDMwLjc5NTYgNi4zMTYwNyAzMS41NTg3IDYuODc4NjggMzIuMTIxM0M3LjQ0MTI5IDMyLjY4MzkgOC4yMDQzNSAzMyA5IDMzSDIwLjcxNUMyMC4xOSAzMi4wODUgMTkuODE1IDMxLjA4IDE5LjYzNSAzMFpNMTkuNSA1LjI1TDI3Ljc1IDEzLjVIMTkuNVY1LjI1Wk0xMiAxMy41QzEyLjc5NTYgMTMuNSAxMy41NTg3IDEzLjgxNjEgMTQuMTIxMyAxNC4zNzg3QzE0LjY4MzkgMTQuOTQxMyAxNSAxNS43MDQ0IDE1IDE2LjVDMTUgMTcuMjk1NiAxNC42ODM5IDE4LjA1ODcgMTQuMTIxMyAxOC42MjEzQzEzLjU1ODcgMTkuMTgzOSAxMi43OTU2IDE5LjUgMTIgMTkuNUMxMC4zMzUgMTkuNSA5IDE4LjE2NSA5IDE2LjVDOSAxNC44MzUgMTAuMzUgMTMuNSAxMiAxMy41Wk0zMCAyMi41VjI3SDM0LjVWMzBIMzBWMzQuNUgyN1YzMEgyMi41VjI3SDI3VjIyLjVIMzBaIiBmaWxsPSIjQUVCNUJDIi8+Cjwvc3ZnPgo="},852:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEzIDlWMy41TDE4LjUgOUgxM1pNNiAyQzQuODkgMiA0IDIuODkgNCA0VjIwQzQgMjAuNTMwNCA0LjIxMDcxIDIxLjAzOTEgNC41ODU3OSAyMS40MTQyQzQuOTYwODYgMjEuNzg5MyA1LjQ2OTU3IDIyIDYgMjJIMThDMTguNTMwNCAyMiAxOS4wMzkxIDIxLjc4OTMgMTkuNDE0MiAyMS40MTQyQzE5Ljc4OTMgMjEuMDM5MSAyMCAyMC41MzA0IDIwIDIwVjhMMTQgMkg2WiIgZmlsbD0iIzgwODE4NSIvPgo8L3N2Zz4K"},853:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1LjgzMzcgNS4zNDE5OUwxNC42NTg3IDQuMTY2OTlMMTAuMDAwMyA4LjgyNTMzTDUuMzQxOTkgNC4xNjY5OUw0LjE2Njk5IDUuMzQxOTlMOC44MjUzMyAxMC4wMDAzTDQuMTY2OTkgMTQuNjU4N0w1LjM0MTk5IDE1LjgzMzdMMTAuMDAwMyAxMS4xNzUzTDE0LjY1ODcgMTUuODMzN0wxNS44MzM3IDE0LjY1ODdMMTEuMTc1MyAxMC4wMDAzTDE1LjgzMzcgNS4zNDE5OVoiIGZpbGw9IiMyQjJEMzMiLz4KPC9zdmc+Cg=="},854:function(t,e,n){"use strict";n(845)},855:function(t,e,n){var r=n(52)(!1);r.push([t.i,'.foniy-drag-uploads{width:100%}.foniy-drop-file{width:100%;padding:30px;background:#f8f8f8;border:1.5px dashed #ced4da;border-radius:4px;display:flex;flex-direction:column;align-items:center;position:relative;cursor:pointer}.foniy-drop-file img{margin-bottom:16px}.foniy-drop-file h1{font-family:"Roboto";font-style:normal;font-weight:500;font-size:16px;text-align:center;color:#2b2d33;line-height:20px;position:relative;z-index:0;margin:0 0 10px}.foniy-drop-file p{margin:0;font-family:"Roboto";font-style:normal;font-weight:400;font-size:13px;line-height:16px;color:#aaabad}.foniy-drop-file input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:1}.foniy-drag-uploads-list{display:flex;flex-wrap:wrap;padding:15px -2px 30px}.foniy-drag-uploads-list .foniy-drag-uploads-list-item{padding:2px}.foniy-drag-uploads-list .foniy-file-link{width:calc(100% - 20px);padding-right:10px}.foniy-drag-uploads-list .foniy-drag-uploads-list-content{display:flex;align-items:center;border:1px solid #e9eaea;background:#f4f4f4;border-radius:4px;padding:10px;width:300px;box-sizing:border-box}.foniy-drag-uploads-list a{margin-right:10px;display:flex;align-items:center;font-family:"Roboto";font-style:normal;font-weight:400;font-size:14px;color:#2b2d33;line-height:16px;width:100%}.foniy-drag-uploads-list a img{margin-right:8px;width:20px}.foniy-drag-uploads-list a p{margin:0;width:calc(100% - 28px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.foniy-drag-uploads-list button{outline:none;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;justify-content:flex-end;padding:0}.foniy-drag-uploads-list button img{width:20px}',""]),t.exports=r}}]);