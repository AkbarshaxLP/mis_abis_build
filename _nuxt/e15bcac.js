(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1138:function(t,e,r){"use strict";r.r(e);r(7),r(9),r(6),r(10);var n=r(0),o=(r(22),r(256),r(4),r(2),r(8),r(35));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={data:function(){return{DIC_groups:[],loading:!1,curTabName:{1:"all_users",2:"for_teacher"},dic_timetable:{},currentTab:null,title:"2022-2023",show:!1,items:[{text:"Academic year",active:!1},{text:"2022-2023",active:!0}],form:{academic_year:null},rows:{results:[]},attach_form:{group:null,student:[]},students:{results:[]},DIC_teacher:[],filter:{search:""}}},computed:l(l({},Object(o.b)("dictionary",["dic_academic_year","dic_grade","dic_branch","dic_language","dic_role"])),{},{role:function(){var t;return null===(t=this.$store.state.auth.user)||void 0===t?void 0:t.role.name},currentAY:function(){var a={},t=Number(this.$route.params.id);return this.dic_academic_year.filter((function(e){e.id===t&&(a=e)})),a},DIC_grade_options:function(){var t=this,a=[];return this.dic_grade.filter((function(e){e.id===t.form.grade&&(a=e.options)})),a}}),watch:{show:function(t){t?this.form.academic_year=Number(this.$route.params.id):this.form={}}},created:function(){this.form.academic_year=Number(this.$route.params.id),this.__GET(),this.getGroups()},methods:{deleteItem:function(t){var e=this;this.$confirm("Do you want delete this group?",{confirmButtonText:"Yes",cancelButtonText:"Cancel",type:"warning"}).then((function(){e.loading=!0,e.$axios.delete("/group/".concat(t,"/")).then((function(){e.getGroups(),e.$message({type:"success",message:"Deleted"})})).catch((function(t){var r=t.response.data,n=Object.keys(r),o="string"==typeof r[n[0]]?r[n[0]]:r[n[0]][0];e.$Swal.fire({title:"Error",text:o||"error has occurred",type:"error"})})).finally((function(){e.loading=!1}))}))},setForm:function(t){this.form=l({},t),this.form.academic_year=this.form.academic_year?this.form.academic_year.id:null,this.form.branch=this.form.branch?this.form.branch.id:null,this.form.grade=this.form.grade?this.form.grade.id:null,this.getTeachers()},getGroups:function(){var t=this;this.filter.academic_year=this.$route.params.id,this.filter.no_page="true",this.loading=!0,this.$axios.get("/group/",{params:this.filter}).then((function(e){t.DIC_groups=e.data})).finally((function(){t.loading=!1}))},getNameOf:function(t,e){var a=null;return e.filter((function(e){e.id===t&&(a=e.name)})),a},__GET:function(){this.getGroups(),this.getTeachers()},returnRoleId:function(t){var a=null;return this.dic_role.filter((function(e){e.name===t&&(a=e.id)})),a},getTeachers:function(){var t=this;this.loading=!0;var e=this.returnRoleId("teacher");this.$axios({method:"GET",url:"/teachers/",params:{role:e}}).then((function(e){t.DIC_teacher=e.data})).finally((function(){t.loading=!1}))},clearForm:function(){},save:function(){var t=this;this.$refs.form.validate().then((function(e){if(e){var r=t.form.id;t.$axios({method:r?"PATCH":"POST",url:r?"/group/".concat(r,"/"):"/group/",data:t.form}).then((function(e){t.$Swal.fire({title:"Group has been saved!",type:"success"}),t.show=!1,t.getGroups(),t.clearForm()})).catch((function(e){var r=e.response.data,n=Object.keys(r),o="string"==typeof r[n[0]]?r[n[0]]:r[n[0]][0];t.$Swal.fire({title:"Error",text:o||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))}}},m=r(16),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",{staticClass:"d-flex align-items-center mb-3"},[n("h4",[t._v("Classes")]),t._v(" "),n("div",{staticClass:"ml-auto align-items-center d-flex"},[n("el-input",{staticStyle:{"max-width":"300px"},attrs:{placeholder:"Search...",clear:"foniy-input ",clearable:"","suffix-icon":"el-icon-search"},on:{input:function(e){return t.getGroups()}},model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search",e)},expression:"filter.search"}}),t._v(" "),["admin","super_admin","branch_admin"].includes(t.role)?n("b-button",{staticClass:"ml-1",staticStyle:{"min-width":"120px"},attrs:{variant:"success"},on:{click:function(e){t.show=!0}}},[n("i",{staticClass:"fas fa-plus-circle mr-1"}),t._v("Add Class\n            ")]):t._e()],1)]),t._v(" "),t.DIC_groups&&t.DIC_groups.length&&!t.loading?n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-centered mb-0"},[t._m(0),t._v(" "),n("tbody",t._l(t.DIC_groups,(function(e,o){return n("tr",{key:e.id},[n("td",[t._v(t._s(o+1)+".")]),t._v(" "),n("td",{staticClass:" font-13 color-primary text-underline font-weight-bold"},[n("nuxt-link",{attrs:{to:"/groups/students/"+e.id}},[t._v(t._s(e.name))])],1),t._v(" "),n("td",{staticClass:"text-muted font-13"},[t._v("\n                        "+t._s(e.branch?e.branch.legal_name:"")+"\n                    ")]),t._v(" "),n("td",{staticClass:"text-muted font-13"},[t._v("\n                        "+t._s(e.student_count)+"\n                    ")]),t._v(" "),n("td",{staticClass:"text-muted font-13"},[t._v("\n                        "+t._s(e.academic_year?e.academic_year.name:"")+"\n                    ")]),t._v(" "),n("td",{staticClass:"text-muted font-13"},[t._v("\n                        "+t._s(e.grade?e.grade.name:"")+"\n                    ")]),t._v(" "),n("td",[n("img",{staticClass:"cursor-pointer mr-2",attrs:{src:r(839)},on:{click:function(r){t.show=!0,t.setForm(e)}}}),t._v(" "),n("i",{staticClass:"el-icon-delete cursor-pointer text-red-600",on:{click:function(r){return t.deleteItem(e.id)}}})])])})),0)])]):t._e(),t._v(" "),n("b-modal",{attrs:{size:"lg",id:"semester-view-modal",title:"Add Class","no-close-on-backdrop":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.cancel;return[n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.save()}}},[t._v(" Save ")]),t._v(" "),n("b-button",{attrs:{size:"md"},on:{click:function(t){return r()}}},[t._v(" Close ")])]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("ValidationObserver",{ref:"form"},[n("div",{staticClass:"school-create-form"},[n("div",{staticClass:"row"},["pre-school"===t.getNameOf(t.form.grade,t.dic_grade)?n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Branch *")]),t._v(" "),n("b-select",{class:{invalid:r[0]},model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}},t._l(t.dic_branch,(function(t){return n("option",{key:t.id,attrs:{label:t.short_name},domProps:{value:t.id}})})),0)]}}],null,!1,427498222)})],1),t._v(" "),n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Name *")]),t._v(" "),n("b-input",{class:{invalid:r[0]},attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})]}}],null,!1,1516983682)})],1)]):t._e(),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Academic Year name *")]),t._v(" "),n("b-select",{class:{invalid:r[0]},attrs:{disabled:"",type:"text"},model:{value:t.form.academic_year,callback:function(e){t.$set(t.form,"academic_year",e)},expression:"form.academic_year"}},t._l(t.dic_academic_year,(function(e){return n("option",{key:e.id,attrs:{label:e.name},domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])})),0)]}}])})],1),t._v(" "),n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Grade: *")]),t._v(" "),n("b-select",{class:{invalid:r[0]},on:{change:function(e){t.form.option=null}},model:{value:t.form.grade,callback:function(e){t.$set(t.form,"grade",e)},expression:"form.grade"}},t._l(t.dic_grade,(function(t){return n("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})),0)]}}])})],1),t._v(" "),"pre-school"!==t.getNameOf(t.form.grade,t.dic_grade)?n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Options: *")]),t._v(" "),n("b-select",{class:{invalid:r[0]},attrs:{disabled:!t.form.grade},model:{value:t.form.option,callback:function(e){t.$set(t.form,"option",e)},expression:"form.option"}},t._l(t.DIC_grade_options,(function(t){return n("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})),0)]}}],null,!1,2158860178)})],1):t._e()]),t._v(" "),n("div",{staticClass:"col-md-6"},["pre-school"!==t.getNameOf(t.form.grade,t.dic_grade)?n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Branch *")]),t._v(" "),n("b-select",{class:{invalid:r[0]},on:{change:t.getTeachers},model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}},t._l(t.dic_branch,(function(t){return n("option",{key:t.id,attrs:{label:t.short_name},domProps:{value:t.id}})})),0)]}}],null,!1,4028750442)})],1):t._e(),t._v(" "),n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("p",{staticClass:"mb-1"},[t._v("Language: *")]),t._v(" "),n("b-select",{class:{invalid:r[0]},model:{value:t.form.education_language,callback:function(e){t.$set(t.form,"education_language",e)},expression:"form.education_language"}},t._l(t.dic_language,(function(t){return n("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})),0)]}}])})],1),t._v(" "),n("div",{staticClass:"item"},[n("p",{staticClass:"mb-1"},[t._v("Class Teacher:")]),t._v(" "),n("b-select",{model:{value:t.form.teacher,callback:function(e){t.$set(t.form,"teacher",e)},expression:"form.teacher"}},t._l(t.DIC_teacher,(function(e){return n("option",{key:e.id,attrs:{label:t._f("fio")(e)},domProps:{value:e.id}})})),0)],1)])]),t._v(" "),n("div",{staticClass:"item"},[n("p",{staticClass:"mb-1"},[t._v("Description")]),t._v(" "),n("b-textarea",{attrs:{type:"text"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)])])],1),t._v(" "),t.loading?n("div",{staticClass:"table-loader",staticStyle:{height:"500px"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" "),n("p",{staticClass:"m-0 mt-1"},[t._v("loading...")])]):t._e(),t._v(" "),!t.DIC_groups||t.DIC_groups.length||t.loading?t._e():n("div",{staticClass:"empty-time-table",staticStyle:{height:"500px"}},[t._m(1)])],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"font-13 bg-light text-muted"},[r("tr",[r("th",{staticClass:"font-weight-medium",staticStyle:{width:"50px"}},[t._v("#")]),t._v(" "),r("th",{staticClass:"font-weight-medium"},[t._v("Group name")]),t._v(" "),r("th",{staticClass:"font-weight-medium"},[t._v("Branch")]),t._v(" "),r("th",{staticClass:"font-weight-medium"},[t._v("Students count")]),t._v(" "),r("th",{staticClass:"font-weight-medium"},[t._v("Academic year")]),t._v(" "),r("th",{staticClass:"font-weight-medium"},[t._v("Grade")]),t._v(" "),r("th",{staticClass:"font-weight-medium"},[t._v("Actions")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"text-center"},[r("i",{staticClass:"mdi mdi-timer-outline font-20"}),t._v(" "),r("br"),t._v("\n            No data!\n        ")])}],!1,null,null,null);e.default=component.exports},839:function(t,e,r){t.exports=r.p+"img/pen.8d1d161.svg"}}]);