(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1029:function(t,e,l){"use strict";l(985)},1030:function(t,e,l){var n=l(52)(!1);n.push([t.i,".school-create-form .item{margin-bottom:.5rem}",""]),t.exports=n},1137:function(t,e,l){"use strict";l.r(e);l(8),l(7),l(9),l(10);var n=l(0),r=(l(4),l(2),l(6),l(35));function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,l)}return e}var c={head:function(){return{title:"".concat(this.title," | MIS tbteam.uz")}},data:function(){return{loading:!1,perPage:null,attach_form:{complaints:null,student:[]},currentPage:1,totalRows:null,form:{},filter:{page:1},show:!1,title:"Complaints",items:[{text:"Complaints",active:!0}],rows:{results:[]},students:{results:[]},dic_status:[{id:"new",label:"NEW",variant:"info"},{id:"confirmed",label:"CONFIRMED",variant:"success"},{id:"checking",label:"CHECKING",variant:"warning"},{id:"need_resolve",label:"NEED RESOLVE",variant:"danger"}]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.b)("dictionary",["dic_category"])),created:function(){this.__GET()},methods:{pageChanged:function(){var t=this;this.$nextTick((function(){t.__GET()}))},filtering:function(){this.__GET()},__GET:function(){var t=this;this.loading=!0,this.filter.academic_year=this.$route.params.id,this.$axios.get("/complaint/",{params:this.filter}).then((function(e){t.rows=e.data})).finally((function(){t.loading=!1}))},GetStatus:function(t){var data={};return this.dic_status.forEach((function(element){t==element.id&&(data=element)})),data}},middleware:"auth"},d=c,f=(l(1029),l(16)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"row mb-4"},[l("div",{staticClass:"col-lg-12"},[l("div",{staticClass:"d-flex flex-wrap"},[l("div",{staticClass:"item mr-2"},[l("p",{staticClass:"mb-1"},[t._v("Theme type")]),t._v(" "),l("el-select",{staticClass:"foniy-select w-full ml-1",staticStyle:{width:"200px"},attrs:{placeholder:"Choose..."},on:{change:function(e){t.filter.page=1,t.__GET()}},model:{value:t.filter.category,callback:function(e){t.$set(t.filter,"category",e)},expression:"filter.category"}},t._l(t.dic_category,(function(t,i){return l("el-option",{key:i,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),l("div",{staticClass:"item mr-2"},[l("p",{staticClass:"mb-1"},[t._v("Status")]),t._v(" "),l("el-select",{staticClass:"foniy-select w-full ml-1",staticStyle:{width:"200px"},attrs:{placeholder:"Choose..."},on:{change:function(e){t.filter.page=1,t.__GET()}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.dic_status,(function(t,i){return l("el-option",{key:i,attrs:{label:t.label,value:t.id}})})),1)],1),t._v(" "),l("div",{staticClass:"item mr-2"},[l("p",{staticClass:"mb-1"},[t._v("Search")]),t._v(" "),l("b-input",{staticStyle:{width:"200px"},attrs:{placeholder:"Search..."},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.filter.page=1,t.__GET()}},model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search",e)},expression:"filter.search"}})],1),t._v(" "),l("div",{staticClass:"item d-flex"},[l("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mt-auto btn btn-clear",attrs:{title:"Clear filter"},on:{click:function(e){t.filter={page:1},t.__GET()}}},[l("i",{staticClass:"mdi mdi-broom text-lg-center"})])])])])]),t._v(" "),t.rows.results&&t.rows.results.length&&!t.loading?l("div",{staticClass:"row"},[l("div",{staticClass:"col-12"},[l("div",{staticClass:"table-responsive mb-3"},[l("table",{staticClass:"table table-centered mb-0"},[t._m(0),t._v(" "),l("tbody",t._l(t.rows.results,(function(e,n){return l("tr",{key:e.id},[l("td",[t._v(t._s(10*(t.filter.page-1)+n+1)+".")]),t._v(" "),l("td",[l("nuxt-link",{staticStyle:{"text-decoration-line":"underline"},attrs:{to:"/complaints/"+e.id}},[t._v(t._s(e.category))])],1),t._v(" "),l("td",{staticClass:"text-muted font-13"},[t._v("\n                                "+t._s(e.description)+"\n                            ")]),t._v(" "),l("td",{staticClass:"text-muted font-13"},[t._v("\n                                "+t._s(t._f("fio")(e.user))+"\n                            ")]),t._v(" "),l("td",{staticClass:"text-muted font-13"},[e.file?l("a",{attrs:{href:e.file,download:""}},[l("b-button",{staticClass:"d-flex align-items-center",attrs:{variant:"primary",outline:"",size:"sm"}},[l("i",{staticClass:"fas mr-2 fa-cloud-download-alt"}),t._v("\n                                        Download")])],1):l("span",[t._v("Empty")])]),t._v(" "),l("td",{staticClass:"text-muted font-13"},[t._v("\n                                "+t._s(e.created_at)+"\n                            ")]),t._v(" "),l("td",{staticClass:"text-muted font-13"},[l("b-badge",{attrs:{variant:t.GetStatus(e.status).variant}},[t._v(t._s(t.GetStatus(e.status).label))])],1)])})),0)])]),t._v(" "),l("div",{staticClass:"d-flex justify-content-end w-full"},[l("b-pagination",{attrs:{"total-rows":t.rows.count,"per-page":10},on:{change:t.pageChanged},model:{value:t.filter.page,callback:function(e){t.$set(t.filter,"page",e)},expression:"filter.page"}})],1)])]):t._e(),t._v(" "),t.loading?l("div",{staticClass:"table-loader",staticStyle:{height:"500px"}},[l("i",{staticClass:"el-icon-loading"}),t._v(" "),l("p",{staticClass:"m-0 mt-1"},[t._v("loading...")])]):t._e(),t._v(" "),!t.rows.results||t.rows.results.length||t.loading?t._e():l("div",{staticClass:"empty-time-table",staticStyle:{height:"500px"}},[t._m(1)])])}),[function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("thead",{staticClass:"font-13 bg-light text-muted"},[l("tr",[l("th",{staticClass:"font-weight-medium",staticStyle:{width:"50px"}},[t._v("#")]),t._v(" "),l("th",{staticClass:"font-weight-medium"},[t._v("Theme")]),t._v(" "),l("th",{staticClass:"font-weight-medium"},[t._v("Description")]),t._v(" "),l("th",{staticClass:"font-weight-medium"},[t._v("User")]),t._v(" "),l("th",{staticClass:"font-weight-medium"},[t._v("File")]),t._v(" "),l("th",{staticClass:"font-weight-medium"},[t._v("Send Date")]),t._v(" "),l("th",{staticClass:"font-weight-medium"},[t._v("Status")])])])},function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("p",{staticClass:"text-center"},[l("i",{staticClass:"mdi mdi-timer-outline font-20"}),t._v(" "),l("br"),t._v("\n            No data!\n        ")])}],!1,null,null,null);e.default=component.exports},985:function(t,e,l){var content=l(1030);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(53).default)("5c0c6a54",content,!0,{sourceMap:!1})}}]);