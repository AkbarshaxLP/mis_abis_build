(window.webpackJsonp=window.webpackJsonp||[]).push([[249,41],{1401:function(t,e,r){"use strict";r.r(e);r(7),r(9),r(6),r(10);var n=r(11),l=r(0),o=(r(61),r(22),r(256),r(4),r(2),r(12),r(24),r(8),r(42),r(43),r(848),r(526),r(35));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={head:function(){return{title:"".concat(this.title," | MIS tbteam.uz")}},data:function(){return{students_filter:"all_students",parentType:{m:"Father",f:"Mother"},loading:!1,data:{},current_course:null,courses:[],DIC_group:[],title:"Parents",items:[{text:"Parents",active:!0}],currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:{},filterOn:[],sortBy:"age",sortDesc:!1,exelLoader:!1,fields:[{label:"#",key:"index",sortable:!1},{label:"Full Name",key:"full_name",sortable:!1},{label:"Phone",key:"phone",sortable:!1},{label:"Parent",key:"gender"},{label:"",key:"actions",sortable:!1}]}},computed:d(d({},Object(o.b)("dictionary",["dic_branch","dic_social_status","dic_grade","dic_academic_year","dic_role"])),{},{totalRows:function(){return this.data.count},role:function(){var t;return null===(t=this.$store.state.auth.user)||void 0===t?void 0:t.role.name}}),watch:{"filter.search":function(t){t||this.__GET()},students_filter:function(t){}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$route.query.page&&(t.currentPage=Number(t.$route.query.page),t.$forceUpdate()),e.next=3,t.__GET();case 3:case"end":return e.stop()}}),e)})))()},methods:{returnRoleId:function(t){var a=null;return this.dic_role.filter((function(e){e.name===t&&(a=e.id)})),a},pageChanged:function(t){this.$router.replace("/tables/parents?page=".concat(t)),this.__GET()},rowClass:function(t,e){return"tr-vertical-align-middle"},__GET:function(){var t=this;this.$nextTick((function(){t.loading=!0,t.$axios({method:"GET",params:d(d({},t.filter),{},{page:t.currentPage}),url:"/users/parent"}).then((function(e){t.data=e.data})).finally((function(){t.loading=!1}))}))},onFiltered:function(t){this.currentPage=1},rmItem:function(t){var e=this;this.$Swal.fire({title:"Are you sure you want to remove this student?",type:"warning",showCancelButton:!0,confirmButtonText:"Delete!",cancelButtonText:"Cancel!",confirmButtonClass:"btn btn-danger mt-2",cancelButtonClass:"btn btn-primary ml-2 mt-2",buttonsStyling:!1}).then((function(r){r.value&&(e.loading=!0,e.$axios.delete("/users/student/".concat(t,"/")).then((function(t){e.__GET(),e.$Swal.fire({title:"Deleted!",type:"info"})})).catch((function(t){var r=t.response.data,n=Object.keys(r),l="string"==typeof r[n[0]]?r[n[0]]:r[n[0]][0];e.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){e.loading=!1})))}))},DownloadExel:function(){var t=this;this.exelLoader=!0,this.$axios.get("/excel/?role=parent",{responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),link=document.createElement("a");link.href=e,link.setAttribute("download","AllParentsLoginPasswors.xlsx"),document.body.appendChild(link),link.click()})).finally((function(){t.exelLoader=!1}))}},middleware:"auth"},m=r(16),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("PageHeader",{attrs:{title:t.title,items:t.items}}),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"pb-2 w-full d-flex align-items-center justify-content-between"},[n("h2",{staticClass:"mTitle"},[t._v("All parents")]),t._v(" "),n("div",[n("b-button",{staticClass:"ml-1",staticStyle:{"min-width":"150px"},attrs:{variant:"light",disabled:t.exelLoader},on:{click:function(e){return t.DownloadExel()}}},[t.exelLoader?n("i",{staticClass:"el-icon-loading"}):n("i",{staticClass:"mdi mdi-download mr-1"}),t._v("\r\n                                        Download\r\n                                    ")])],1)])]),t._v(" "),n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"d-flex flex-wrap"},[n("div",{staticClass:"item mr-2"},[n("p",{staticClass:"mb-1"},[t._v("Parent")]),t._v(" "),n("b-select",{staticStyle:{width:"200px"},attrs:{placeholder:"Choose..."},on:{change:function(e){return t.__GET()}},model:{value:t.filter.gender,callback:function(e){t.$set(t.filter,"gender",e)},expression:"filter.gender"}},[n("option",{domProps:{value:null}},[t._v("Mother and Father")]),t._v(" "),n("option",{attrs:{value:"m"}},[t._v("Father")]),t._v(" "),n("option",{attrs:{value:"f"}},[t._v("Mother")])])],1),t._v(" "),n("div",{staticClass:"item mr-2"},[n("p",{staticClass:"mb-1"},[t._v("Branch")]),t._v(" "),n("b-select",{staticStyle:{width:"200px"},attrs:{placeholder:"Choose..."},on:{change:function(e){return t.__GET()}},model:{value:t.filter.branch,callback:function(e){t.$set(t.filter,"branch",e)},expression:"filter.branch"}},t._l(t.dic_branch,(function(e){return n("option",{key:e.id,attrs:{label:e.short_name},domProps:{value:e.id}},[t._v("\r\n                                            "+t._s(e.short_name)+"\r\n                                        ")])})),0)],1),t._v(" "),n("div",{staticClass:"item d-flex"},[n("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mt-auto btn btn-clear",attrs:{title:"Clear filter"},on:{click:function(e){t.filter={},t.__GET()}}},[n("i",{staticClass:"mdi mdi-broom text-lg-center"})])])])])])])])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row mb-md-2"},[n("div",{staticClass:"col-sm-12"},[n("div",{staticClass:"dataTables_filter text-md-right",attrs:{id:"tickets-table_filter"}},[n("label",{staticClass:"d-inline-flex align-items-center"},[t._v("\r\n                                    Search:\r\n                                    "),n("b-form-input",{staticClass:"form-control form-control-sm ml-2",attrs:{type:"search",placeholder:"Search..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.__GET()}},model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search",e)},expression:"filter.search"}})],1)])])]),t._v(" "),n("div",{staticClass:"table-responsive mb-0"},[t.loading?n("div",{staticClass:"card-disabled"},[t._m(0)]):t._e(),t._v(" "),n("b-table",{attrs:{items:t.data.results,fields:t.fields,responsive:"sm","per-page":t.perPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn,"tbody-tr-class":t.rowClass},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(index)",fn:function(data){return[t._v("\r\n                                "+t._s(10*(t.currentPage-1)+data.index+1)+"\r\n                            ")]}},{key:"cell(full_name)",fn:function(data){return[n("nuxt-link",{attrs:{to:"/tables/parents/childrens?parent_id="+data.item.id}},[n("u",[t._v(t._s(t._f("fio")(data.item)))])])]}},{key:"cell(phone)",fn:function(data){return[t._v("\r\n                                "+t._s(t._f("phone")(data.item.phone))+"\r\n                            ")]}},{key:"cell(gender)",fn:function(data){return[t._v("\r\n                                "+t._s(t.parentType[data.item.gender])+"\r\n                            ")]}},{key:"cell(employee_branch)",fn:function(data){return[t._v("\r\n                                "+t._s(data.item.employee_branch?data.item.employee_branch.map((function(t){return t.short_name})).join(", "):"")+"\r\n                            ")]}},{key:"cell(avatar)",fn:function(data){return[data.item.photo?n("img",{staticClass:"table-avatar ml-auto float-right border-50",attrs:{src:data.item.photo}}):n("img",{staticClass:"table-avatar float-right",attrs:{src:r(843)}})]}},{key:"cell(actions)",fn:function(data){return[n("ul",{staticClass:"list-inline table-action m-0"},[n("li",{staticClass:"list-inline-item"},[n("a",{staticClass:"action-icon px-1",attrs:{href:"javascript:void(0);"}},[n("i",{staticClass:"mdi mdi-delete"})])])])]}}])})],1),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[t.totalRows?n("ul",{staticClass:"pagination pagination-rounded mb-0"},[n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage},on:{change:t.pageChanged},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()])])])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-portlets-loader"},[e("div",{staticClass:"spinner-border text-primary m-2",attrs:{role:"status"}})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{PageHeader:r(837).default})},837:function(t,e,r){"use strict";r.r(e);var n=r(35),l={components:{},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},computed:Object(n.c)(["layout"])},o=r(16),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"page-title-box",class:{"page-title-box-alt":"vertical"!==t.layout.layoutType&&"two-column"!==t.layout.layoutType}},[r("h4",{staticClass:"page-title"},[t._v(t._s(t.title))]),t._v(" "),r("div",{staticClass:"page-title-right"},[r("b-breadcrumb",{staticClass:"m-0",attrs:{items:t.items}})],1)])])])}),[],!1,null,null,null);e.default=component.exports},843:function(t,e,r){t.exports=r.p+"img/default-avatar.26ed590.svg"}}]);