(window.webpackJsonp=window.webpackJsonp||[]).push([[215,34,41,67],{1e3:function(t,e,n){"use strict";n.r(e);n(8),n(7),n(9),n(10);var r=n(0),l=(n(2),n(6),n(4),n(22),n(14),n(47),n(76),n(171),n(12),n(25),n(35)),o=n(5),c=n.n(o);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:["grade"],computed:m(m({},Object(l.b)("dictionary",["dic_branch","dic_academic_year","dic_grade","dic_role"])),{},{semester_list:function(){var t=this,data=[];return this.dic_academic_year.forEach((function(element){element.current_academicyear&&(t.filter.academic_year=element.id,element.semesters.forEach((function(e){e.current_semester&&(t.filter.semester=e.id)})),data=element.semesters)})),data},cur_academic_year:function(){var data="";return this.dic_academic_year.forEach((function(element){element.current_academicyear&&(data=element.id)})),data},cur_semester:function(){var t=this,data="";return this.dic_academic_year.forEach((function(element){element.current_academicyear&&(t.filter.academic_year=element.id,element.semesters.forEach((function(t){t.current_semester&&(data=t.id)})))})),data},dic_list:function(){return this.TimeTabledic&&this.TimeTabledic.length?this.TimeTabledic.filter((function(element){return"Lesson"==element.type})):[]},role:function(){var t;return null===(t=this.$store.state.auth.user)||void 0===t?void 0:t.role.name}}),data:function(){return{title:"Timetable",items:[{text:"Timetable",href:"/timetable"},{text:"Group",active:!0}],loader:!1,TimeTableGroup:{},TimeTabledic:{},filter:{},Leesons:[],semester:"",academic_year:"",timeTableList:[],a:[],time_table_id:"",time_table_base:{id:7,academic_year:{id:11,name:"2022-2023"},semester:{id:13,start_semester:"05.09.2022",end_semester:"10.11.2022"},group:{id:23,name:"3 A"},etimetablelesson:[{weekday:"Monday",timetable:[{weekday:"Monday",etimetable:7,para:"",lesson:"",edit:!0,loading:!1}]},{weekday:"Tuesday",timetable:[{weekday:"Tuesday",etimetable:7,para:"",lesson:"",edit:!0,loading:!1}]},{weekday:"Wednesday",timetable:[{weekday:"Wednesday",etimetable:7,para:"",lesson:"",edit:!0,loading:!1}]},{weekday:"Thursday",timetable:[{weekday:"Thursday",etimetable:7,para:"",lesson:"",edit:!0,loading:!1}]},{weekday:"Friday",timetable:[{weekday:"Friday",etimetable:7,para:"",lesson:"",edit:!0,loading:!1}]},{weekday:"Saturday",timetable:[{weekday:"Saturday",etimetable:7,para:"",lesson:"",edit:!0,loading:!1}]}]}}},watch:{grade:function(){this._gettimetableDic()},semester:function(){this._getList()}},methods:{_getList:function(){var t=this;this.loader=!0,this.semester=this.semester?this.semester:this.cur_semester,this.academic_year=this.academic_year?this.academic_year:this.cur_academic_year,this.$axios.get("/etimetablelist/?academic_year=".concat(this.academic_year,"&semester=").concat(this.semester,"&group=").concat(this.$route.params.id)).then((function(e){if(t.a=e.data,e.data&&e.data.etimetablelesson){var n=[];t.time_table_id=e.data.id,e.data.etimetablelesson.forEach((function(element){if(null==element.timetable)n.push({weekday:element.weekday,timetable:[{weekday:element.weekday,etimetable:e.data.id,para:"",lesson:"",edit:!0,loading:!1}]});else{var r=[];element.timetable.forEach((function(t){r.push(m(m({},t),{},{lesson:t.lesson.id,subject_name:t.lesson.subject_name,main_teacher:t.lesson.main_teacher,teacher:t.lesson.teacher,edit:!1,loading:!1}))})),r=t.SortPara(r),n.push({weekday:element.weekday,timetable:r})}})),e.data.etimetablelesson=n,t.TimeTableGroup=e.data,t.generateTimeTable()}else["branch_admin"].includes(t.role)?t.CreateTimeTableFirst():(t.TimeTableGroup=t.time_table_base,t.generateTimeTable())})).catch((function(){t.loader=!1}))},SortPara:function(t){return t.sort((function(a,b){return a.para>b.para?1:-1}))},_gettimetableDic:function(){var t=this;this.loader=!0,this.$axios.get("/timetabledict/").then((function(e){var data=[];e.data.results.forEach((function(e){e.grade.forEach((function(n){n.name==t.grade&&(data=e.dicttime)}))})),t.TimeTabledic=data,t._getList()})).catch((function(){t.loader=!1}))},IssetPara:function(t){var data=[];return t.forEach((function(element){data.push(element.para)})),data},SubjectName:function(t){var data=t.subject_name;return t.main_teacher&&t.main_teacher.first_name&&(data=data+" | "+t.main_teacher.last_name+" "+t.main_teacher.first_name+" "+t.main_teacher.middle_name),data},getsubjects:function(){var t=this;this.loadingsubject=!0,this.$axios.get("/lesson/?group=".concat(this.$route.params.id,"&limit=1000")).then((function(e){t.Leesons=e.data.results})).finally((function(){t.loadingsubject=!1}))},generateTimeTable:function(){var t=this,e=[],n=new Date;n=c()(n).format("dddd"),this.TimeTabledic&&this.TimeTabledic.length&&this.TimeTableGroup&&this.TimeTableGroup.etimetablelesson&&this.TimeTableGroup.etimetablelesson.forEach((function(r){var data={weekday:r.weekday,current_day:r.weekday==n,timetable:[]};t.TimeTabledic.forEach((function(t){"Lesson"!=t.type?data.timetable.push({start_time:t.start_time,end_time:t.end_time,para:t.para,lesson:t.type,subject_name:t.type,color:"color-"+t.type.toLowerCase(),edit:!1,loading:!1}):r.timetable.forEach((function(e){e.para==t.para&&data.timetable.push({id:e.id,start_time:t.start_time,end_time:t.end_time,para:t.para,lesson:e.lesson,subject_name:e.subject_name,color:"color-"+e.subject_name.charAt(0).toLowerCase(),main_teacher:e.main_teacher,teacher:e.timeTableList,edit:!1,loading:!1,delete:!1,type:"Lesson"})}))})),e.push(data)})),this.timeTableList=e,this.loader=!1},SaveEdit:function(t,e,n,i,r){var l=this;if(n.lesson&&n.para){var data=new FormData;this.timeTableList[i].timetable[r].loading=!0,data.append("etimetable",t),data.append("lesson",n.lesson),data.append("para",n.para),data.append("weekday",e),n.id?this.$axios.put("/etimetablelesson/".concat(n.id,"/"),data).catch((function(){})).finally((function(){l.timeTableList[i].timetable[r].subject_name=l.GetSubjectByName(n,"subject_name"),l.timeTableList[i].timetable[r].color="color-"+l.timeTableList[i].timetable[r].subject_name.charAt(0).toLowerCase(),l.timeTableList[i].timetable[r].main_teacher=l.GetSubjectByName(n,"main_teacher").first_name+" "+l.GetSubjectByName(n,"main_teacher").last_name+" "+l.GetSubjectByName(n,"main_teacher").middle_name,l.timeTableList[i].timetable[r].edit=!1,l.timeTableList[i].timetable[r].loading=!1,l.timeTableList[i].timetable=l.SortTimeTable(l.timeTableList[i].timetable)})):this.$axios.post("/etimetablelesson/",data).then((function(t){l.timeTableList[i].timetable[r].start_time=l.GetDicPara(l.timeTableList[i].timetable[r],"start_time"),l.timeTableList[i].timetable[r].id=t.data.id})).catch((function(){})).finally((function(){l.timeTableList[i].timetable[r].subject_name=l.GetSubjectByName(n,"subject_name"),l.timeTableList[i].timetable[r].color="color-"+l.timeTableList[i].timetable[r].subject_name.charAt(0).toLowerCase(),l.timeTableList[i].timetable[r].main_teacher=l.GetSubjectByName(n,"main_teacher").first_name+" "+l.GetSubjectByName(n,"main_teacher").last_name+" "+l.GetSubjectByName(n,"main_teacher").middle_name,l.timeTableList[i].timetable[r].edit=!1,l.timeTableList[i].timetable[r].loading=!1,l.timeTableList[i].timetable=l.SortTimeTable(l.timeTableList[i].timetable)}))}else this.$Swal.fire({title:"Please fill fields!",type:"warning",confirmButtonText:"Ok",confirmButtonClass:"btn btn-success mt-2"})},GetSubjectByName:function(t,e){if("Lesson"==t.type){var data=t[e];return this.Leesons.forEach((function(element){element.id==t.lesson&&(data=element[e])})),data}return t.lesson},DeleteTimeTableList:function(t,i,e){var n=this;t?(this.timeTableList[i].timetable[e].delete=!0,this.$axios.delete("/etimetablelesson/".concat(t,"/")).then((function(){n.timeTableList[i].timetable.splice(e,1)})).catch((function(){}))):this.timeTableList[i].timetable.splice(e,1)},SortTimeTable:function(t){return t.sort((function(a,b){return a.para>b.para?1:-1}))},AddTimeTable:function(i){this.timeTableList[i].timetable.push({start_time:"",end_time:"",para:"",lesson:"",subject_name:"",main_teacher:"",teacher:"",edit:!0,loading:!1,delete:!1,type:"Lesson"})},GetDicPara:function(t,e){var data="--:--";return t.para?(this.TimeTabledic.forEach((function(element){element.para==t.para&&(data=element[e])})),data):data},disabled_para_list:function(t){var data=[];return t.forEach((function(element){data.push(element.para)})),data},CreateTimeTableFirst:function(){var t=this,data=new FormData;data.append("academic_year",this.academic_year),data.append("semester",this.semester),data.append("group",this.$route.params.id),this.$axios.post("/etimetable/",data).then((function(){t._getList()}))},checkCurDate:function(t){if(["branch_admin"].includes(this.role))return!0;var e=new Date;return(e=c()(e).format("YYYY-MM-DD"))>=c()(this.formatDate(t)).format("YYYY-MM-DD")},formatDate:function(t){if(t){var a=t.split(".");return a=a[2]+"-"+a[1]+"-"+a[0]}},generatePara:function(t,e){var i=0;return this.TimeTabledic.forEach((function(element){"Lesson"!=element.type&&element.para<t&&(i+=1)})),e?t-i:t+i}},mounted:function(){this.getsubjects(),this.grade&&this._gettimetableDic(),this.cur_semester&&(this.semester=this.cur_semester),this.cur_academic_year&&(this.academic_year=this.cur_academic_year)}},_=(n(988),n(16)),component=Object(_.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time-table-group"},[n("b-card-text",[n("header",{staticClass:"d-flex align-items-center justify-content-between mb-3"},[n("h4",{staticClass:"m-0"},[t._v("Timetable")]),t._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("el-select",{staticClass:"  foniy-select mr-1",attrs:{placeholder:"Academic year"},model:{value:t.academic_year,callback:function(e){t.academic_year=e},expression:"academic_year"}},t._l(t.dic_academic_year,(function(e,i){return n("el-option",{key:i,attrs:{label:e.name,value:e.id,disabled:!t.checkCurDate(e.start_semester)}})})),1),t._v(" "),n("el-select",{staticClass:"  foniy-select mr-1",attrs:{placeholder:"Term"},model:{value:t.semester,callback:function(e){t.semester=e},expression:"semester"}},t._l(t.semester_list,(function(e,i){return n("el-option",{key:i,attrs:{label:i+1+"-term",value:e.id,disabled:!t.checkCurDate(e.start_semester)}})})),1)],1)]),t._v(" "),n("div",{staticClass:"time-table-view"},[t.timeTableList&&t.timeTableList.length&&!t.loader?n("div",{staticClass:"time-table-view-items"},t._l(t.timeTableList,(function(e,i){return n("div",{key:i,staticClass:"time-table-view-item foniy-table"},[n("div",{staticClass:"foniy-table"},[n("table",{staticClass:"border-all"},[n("tr",{class:e.current_day?"bg-promary-light":"bg-primary"},[n("th",{staticClass:"text-center font-weight-bold",attrs:{colspan:"5"}},[t._v("\n                                    "+t._s(e.weekday)+"\n                                ")])]),t._v(" "),n("tr",{staticClass:"bg-gray"},[n("th",{staticClass:"text-center font-weight-bold",staticStyle:{width:"80px"}}),t._v(" "),n("th",{staticClass:"text-center font-weight-bold",staticStyle:{width:"200px"}},[t._v("Lesson ")]),t._v(" "),n("th",{staticClass:"text-center font-weight-bold",staticStyle:{width:"200px"}},[t._v("Teacher ")]),t._v(" "),n("th",{staticClass:"text-center font-weight-bold",staticStyle:{width:"150px"}},[t._v("Start/End ")]),t._v(" "),["branch_admin"].includes(t.role)?n("th",{staticClass:"text-center font-weight-bold",staticStyle:{width:"80px"}},[t._v("Action")]):t._e()]),t._v(" "),t._l(e.timetable,(function(r,l){return n("tr",{key:l},[n("td",{staticClass:"text-center"},[r.edit?n("el-select",{staticClass:"w-full",attrs:{disabled:!r.edit,placeholder:"Para"},model:{value:r.para,callback:function(e){t.$set(r,"para",e)},expression:"item2.para"}},t._l(t.dic_list,(function(r,l){return n("el-option",{key:r.id,attrs:{disabled:t.disabled_para_list(e.timetable).includes(r.para),label:l+1,value:r.para}})})),1):n("p",{staticClass:"m-0"},["Lesson"==r.type?n("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.generatePara(r.para,!0))+"  ")]):t._e()])],1),t._v(" "),n("td",{staticClass:"text-center"},[r.edit?n("el-select",{staticClass:"w-full",attrs:{disabled:!r.edit,filterable:"","reserve-keyword":"",placeholder:"Lesson"},model:{value:r.lesson,callback:function(e){t.$set(r,"lesson",e)},expression:"item2.lesson"}},t._l(t.Leesons,(function(e){return n("el-option",{key:e.id,attrs:{label:t.SubjectName(e),value:e.id}})})),1):n("p",{staticClass:"m-0 "},[n("span",{staticClass:"font-weight-bold general-lesson-name",class:r.color},["Lunch"==r.lesson?n("i",{staticClass:"mdi mdi-coffee mr-1"}):t._e(),t._v(" "),"Snack"==r.lesson?n("i",{staticClass:"mdi mdi-cupcake mr-1"}):t._e(),t._v("\n                                            "+t._s(r.subject_name)+" \n                                        ")])])],1),t._v(" "),n("td",{staticClass:"text-center font-weight-bold"},[r.main_teacher?n("span",{staticClass:"font-14 pt-1 ml-2 color-primary"},[t._v(" "+t._s(r.main_teacher)+" ")]):t._e()]),t._v(" "),n("td",{staticClass:"text-center font-weight-bold"},[n("p",{staticClass:"time-colors"},[t._v(" "+t._s(t.GetDicPara(r,"start_time"))+" / "+t._s(t.GetDicPara(r,"end_time"))+" ")])]),t._v(" "),["branch_admin"].includes(t.role)?n("td",{staticStyle:{width:"70px"}},["Lesson"==r.type?n("div",{staticClass:"d-flex justify-content-between"},[r.edit||r.loading?t._e():n("button",{staticClass:"button simple font-16 font-weight-bold mr-1",on:{click:function(t){r.edit=!0}}},[n("i",{staticClass:"mdi mdi-pencil"})]),t._v(" "),r.edit&&!r.loading?n("button",{staticClass:"button simple font-16 font-weight-bold mr-1 color-green",on:{click:function(n){return t.SaveEdit(t.time_table_id,e.weekday,r,i,l)}}},[n("i",{staticClass:"mdi mdi-check-bold"})]):t._e(),t._v(" "),r.loading?n("button",{staticClass:"button simple font-16 font-weight-bold mr-1 color-green",attrs:{disabled:""}},[n("i",{staticClass:"el-icon-loading"})]):t._e(),t._v(" "),r.delete?n("button",{staticClass:"button simple font-16 font-weight-bold color-red"},[n("i",{staticClass:"el-icon-loading"})]):n("div",[r.id?n("el-popconfirm",{attrs:{"confirm-button-text":"OK","cancel-button-text":"No, Thanks",title:"Are you sure to delete this?"},on:{confirm:function(e){return t.DeleteTimeTableList(r.id,i,l)}}},[n("button",{staticClass:"button simple font-16 font-weight-bold color-red",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"mdi mdi-close-thick"})])]):n("button",{staticClass:"button simple font-16 font-weight-bold color-red",attrs:{slot:"reference"},on:{click:function(e){return t.DeleteTimeTableList(r.id,i,l)}},slot:"reference"},[n("i",{staticClass:"mdi mdi-close-thick"})])],1)]):t._e()]):t._e()])})),t._v(" "),["branch_admin"].includes(t.role)&&e.timetable&&t.TimeTabledic&&e.timetable.length<t.TimeTabledic.length?n("tr",[n("td",{attrs:{colspan:"5"}},[n("b-button",{staticClass:"ml-1 font-20 font-weight-bold w-full",attrs:{size:"md",variant:"outline-success"},on:{click:function(e){return t.AddTimeTable(i)}}},[n("i",{staticClass:"mdi mdi-plus-circle"})])],1)]):t._e()],2)])])})),0):t._e(),t._v(" "),t.loader?n("div",{staticClass:"table-loader",staticStyle:{height:"300px"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" "),n("p",{staticClass:"m-0 mt-1"},[t._v("loading...")])]):t._e(),t._v(" "),!t.timeTableList||t.timeTableList.length||t.loader?t._e():n("div",{staticClass:"empty-time-table"},[n("p",{staticClass:"text-center"},[n("i",{staticClass:"mdi mdi-timer-outline font-20"}),t._v(" "),n("br"),t._v("\n                    Timetable has not created this group yet!\n                ")])])])])],1)}),[],!1,null,"69e34058",null);e.default=component.exports},1092:function(t,e,n){var content=n(1259);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("52ce69c9",content,!0,{sourceMap:!1})},1258:function(t,e,n){"use strict";n(1092)},1259:function(t,e,n){var r=n(52)(!1);r.push([t.i,'.group-view-header[data-v-9bd49702]{display:flex;align-items:center}.group-view-header h1[data-v-9bd49702]{font-family:"Roboto";font-style:normal;font-weight:700;font-size:18px;line-height:21px;color:#2b2d33;flex:1}.students-list-table tbody td p[data-v-9bd49702]{margin-bottom:4px;font-style:normal;font-weight:400;font-size:14px;line-height:16px;color:#2b2d33}.students-list-table tbody td span[data-v-9bd49702]{font-family:"Roboto";font-style:normal;font-weight:400;font-size:13px;line-height:16px;color:#90999d}',""]),t.exports=r},1446:function(t,e,n){"use strict";n.r(e);n(7),n(9),n(6),n(10);var r=n(11),l=n(0),o=(n(61),n(17),n(22),n(4),n(2),n(256),n(8),n(14),n(47),n(68),n(171),n(35));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={head:function(){return{title:"".concat(this.title," | MIS tbteam.uz")}},components:{DocumentsForGroups:n(1141).default},data:function(){return{index:1,StatusGroup:[],dialog_timetable:!1,loadingStatus:!1,currentGroup:{},timeTable:{file:null},currentTimetable:{},currentTab:0,show:!1,show2:!1,show3:!1,selectedStudents:[],selectedStudents3:[],timeTableList:[],data2:{results:[]},DIC_all_teachers:[],filter2:{},currentPage2:1,form:{},form2:{},totalRows2:0,search2:"",loading:!1,data:{},current_course:null,courses:[],DIC_group:[],title:"Group (Class)",items:[{text:"Groups",active:!0}],studentList:{count:0,results:[]},currentPage:1,currentPage3:1,perPage:10,pageOptions:[10,25,50,100],filter:{},filter3:{},filterOn:[],sortBy:"age",sortDesc:!1,fields:[{label:"",key:"id",sortable:!1},{label:"#",key:"index",sortable:!1},{label:"",key:"avatar",sortable:!1},{label:"Full Name",key:"full_name",sortable:!0},{label:"Branch",key:"branch",sortable:!0},{label:"Login",key:"login"},{label:"Grade",key:"grade"}],fields2:[{label:"#",key:"index",sortable:!1},{label:"Name",key:"subject_name",sortable:!1},{label:"Main Teacher",key:"main_teacher",sortable:!1},{label:"Teacher",key:"teacher",sortable:!1},{label:"",key:"actions",sortable:!1}]}},watch:{currentTab:function(t){var e=d(d({},this.$route.query),{},{currentTab:t});this.$router.push({path:"/groups/students/".concat(this.$route.params.id),query:e})},search2:function(t){""==t&&this.getStudents()}},computed:d(d({},Object(o.b)("dictionary",["dic_branch","dic_social_status","dic_grade","dic_academic_year","dic_subject","dic_edu_language"])),{},{selectedStudents3_id:function(){return this.selectedStudents3.map((function(t){return t.id}))||[]},totalRows:function(){return this.data.count},role:function(){var t;return null===(t=this.$store.state.auth.user)||void 0===t?void 0:t.role.name},DIC_group_LOCAL:function(){var t=this;return this.DIC_group.filter((function(e){if(e.grade.id==t.form.grade)return e}))},grade:function(){return this.currentGroup.grade&&this.currentGroup.grade.name?this.currentGroup.grade.name:0}}),created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$route.query.page&&(t.currentPage=Number(t.$route.query.page),t.$forceUpdate()),t.filter.group=t.$route.params.id,e.next=4,t.__GET();case 4:t.getGroupInfo(),t.getGroups(),t.get_all_teachers(),t.getTimetable(),t.getStudents(),t.getSubjects(),"branch_admin"==t.role&&t.GetGroupStatus();case 11:case"end":return e.stop()}}),e)})))()},methods:{EvetDefaut:function(t){t.preventDefault()},uploadTimetable:function(){var t=this;this.$refs.formTimetable.validate().then((function(e){if(e){var n=t.$route.params.id,r=t.currentTimetable.id;t.timeTable.academic_year=Number(t.$route.params.id);var l=new FormData;l.append("file",t.timeTable.file),l.append("group",n),console.log(r),t.$axios({method:r?"PATCH":"POST",url:r?"/time_table_for_group/".concat(r,"/"):"/time_table_for_group/",data:l}).then((function(e){t.$Swal.fire({title:"Timetable has been saved!",type:"success"}),t.dialog_timetable=!1,t.__GET(),t.getTimetable()})).catch((function(e){var n=e.response.data,r=Object.keys(n),l="string"==typeof n[r[0]]?n[r[0]]:n[r[0]][0];t.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))},deleteFromGroup:function(){var t=this;this.$Swal.fire({title:"Delete this students from this group?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel!",confirmButtonClass:"btn btn-success mt-2",cancelButtonClass:"btn btn-danger ml-2 mt-2",buttonsStyling:!1}).then((function(e){if(e.value){var a=[];t.loading=!0,t.selectedStudents.filter((function(t){a.push({group:null,student:t.id})})),t.$axios.post("/student_add_group/",a).then((function(e){t.show=!1,t.selectedStudents=[],t.__GET(),t.$Swal.fire({title:"Success!",type:"success"})})).catch((function(e){var n=e.response.data,r=Object.keys(n),l="string"==typeof n[r[0]]?n[r[0]]:n[r[0]][0];t.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))},getKeyValue:function(t,e,n){var a=null;return t&&t.filter((function(t){t.id===e&&(a=t[n])})),a},getGroupInfo:function(){var t=this,e=this.$route.query.group?this.$route.query.group:this.$route.params.id;this.$axios.get("/group/".concat(e)).then((function(e){t.currentGroup=e.data,t.title=t.currentGroup.name})).finally((function(){t.loadingStatus=!1}))},setForm2:function(t){var e=this;this.loading=!0,this.$axios.get("/lesson/".concat(t.id,"/")).then((function(t){console.log(t.data),e.form2=t.data,e.form2.main_teacher=e.form2.main_teacher.id,e.form2.teacher=e.form2.teacher.map((function(t){return t.id}))})).finally((function(){e.loading=!1}))},getSubjects:function(){var t=this,e=this.$route.params.id;this.$axios.get("/lesson/?group=".concat(e,"&page=").concat(this.currentPage2,"&search=").concat(this.search2)).then((function(e){t.data2=e.data,t.totalRows2=e.data.count}))},deleteSubject:function(t){var e=this;this.$confirm("Do you want delete this group?",{confirmButtonText:"Yes",cancelButtonText:"Cancel",type:"warning"}).then((function(){e.$axios.delete("/lesson/".concat(t,"/")).then((function(){e.getSubjects(),e.$Swal.fire({title:"Success",text:"Subject is deleted!",type:"success"})})).catch((function(){e.$Swal.fire({title:"Error",text:"You can't delete this subject!",type:"error"})}))}))},addSubject:function(){var t=this;this.$refs.form2.validate().then((function(e){if(e){t.form2.group=t.$route.params.id;var n=t.form2.id;t.$axios({method:n?"PATCH":"POST",url:n?"/lesson/".concat(n,"/"):"/lesson/",data:t.form2}).then((function(e){t.show2=!1,t.getSubjects(),t.$Swal.fire({title:"Success!",type:"success"})})).catch((function(e){var n=e.response.data,r=Object.keys(n),l="string"==typeof n[r[0]]?n[r[0]]:n[r[0]][0];t.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))},clickedStudent:function(t){var e=this.selectedStudents3_id;if(e.includes(t.id)){var n=e.indexOf(t.id);this.selectedStudents3.splice(n,1)}else this.selectedStudents3.push(t)},pageChanged3:function(t){this.currentPage3=t,this.getStudents(t)},getStudents:function(t){var e=this;t||(this.currentPage3=1),this.$nextTick((function(){e.loading=!0,e.$axios({method:"GET",params:d(d({},e.filter3),{},{page:e.currentPage3}),url:"/users/student"}).then((function(t){e.studentList=t.data})).finally((function(){e.loading=!1}))}))},getTimetable:function(){var t=this,e=this.$route.params.id;this.loading=!0,this.$axios.get("/time_table_for_group/?group=".concat(e,"&limit=1000")).then((function(e){var a=e.data[0]||{};t.timeTableList=e.data.results,t.currentTimetable=a})).finally((function(){t.loading=!1}))},returnRoleId:function(t){var a=null;return this.dic_role.filter((function(e){e.name===t&&(a=e.id)})),a},get_all_teachers:function(){var t=this;this.loading=!0,this.$axios({method:"GET",url:"/teachers/"}).then((function(e){t.DIC_all_teachers=e.data})).finally((function(){t.loading=!1}))},linkStudents:function(){var t=this;this.$refs.form1.validate().then((function(e){if(e){var a=[];t.loading=!0,t.selectedStudents.filter((function(e){a.push({group:t.form.group,student:e.id})})),t.$axios.post("/student_add_group/",a).then((function(e){t.show=!1,t.selectedStudents=[],t.__GET(),t.$Swal.fire({title:"Success!",type:"success"})})).catch((function(e){var n=e.response.data,r=Object.keys(n),l="string"==typeof n[r[0]]?n[r[0]]:n[r[0]][0];t.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))},linkStudents3:function(){var t=this;this.$refs.form3.validate().then((function(e){if(e){var n=t.$route.params.id,a=[];t.loading=!0,t.selectedStudents3_id.filter((function(t){a.push({group:n,student:t})})),t.$axios.post("/student_add_group/",a).then((function(e){t.show3=!1,t.selectedStudents3=[],t.__GET(),t.$Swal.fire({title:"Success!",type:"success"})})).catch((function(e){var n=e.response.data,r=Object.keys(n),l="string"==typeof n[r[0]]?n[r[0]]:n[r[0]][0];t.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){t.loading=!1}))}}))},fileChanged:function(t){console.log(t)},clearForm:function(){console.log(1)},pageChanged2:function(t){var e=this;this.$nextTick((function(){e.getSubjects()}))},pageChanged:function(t){this.__GET()},getGroups:function(){var t=this;this.$axios.get("/group/?no_page=1").then((function(e){t.DIC_group=e.data}))},rowClass:function(t,e){return"tr-vertical-align-middle"},__GET:function(){var t=this;this.$nextTick((function(){t.loading=!0,t.$axios({method:"GET",params:d(d({},t.filter),{},{page:t.currentPage}),url:"/users/student"}).then((function(e){t.data=e.data})).finally((function(){t.loading=!1}))}))},onFiltered:function(t){this.currentPage=1},rmItem:function(t){var e=this;this.$Swal.fire({title:"Are you sure you want to remove this student?",type:"warning",showCancelButton:!0,confirmButtonText:"Delete!",cancelButtonText:"Cancel!",confirmButtonClass:"btn btn-danger mt-2",cancelButtonClass:"btn btn-primary ml-2 mt-2",buttonsStyling:!1}).then((function(n){n.value&&(e.loading=!0,e.$axios.delete("/users/student/".concat(t,"/")).then((function(t){e.__GET(),e.$Swal.fire({title:"Deleted!",type:"info"})})).catch((function(t){var n=t.response.data,r=Object.keys(n),l="string"==typeof n[r[0]]?n[r[0]]:n[r[0]][0];e.$Swal.fire({title:"Error",text:l||"error has occurred",type:"error"})})).finally((function(){e.loading=!1})))}))},EditGroup:function(){console.log("AAA")},SaveStatus:function(t){var e=this;this.$Swal.fire({title:"Are you sure change this group's status?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel!",confirmButtonClass:"btn btn-success mt-2",cancelButtonClass:"btn btn-danger ml-2 mt-2",buttonsStyling:!1}).then((function(){e.loadingStatus=!0;var data={status:t.id,branch:e.currentGroup.branch.id,grade:e.currentGroup.grade.id,option:e.currentGroup.option};e.$axios.patch("/group/".concat(e.currentGroup.id,"/"),data).then((function(){e.getGroupInfo()})).catch((function(){e.loadingStatus=!1}))}))},GetGroupStatus:function(){var t=this;this.$axios.get("/groupstatus/").then((function(e){t.StatusGroup=e.data}))}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$route.query.currentTab;case 2:if(!e.sent){e.next=6;break}e.t0=parseInt(t.$route.query.currentTab),e.next=7;break;case 6:e.t0=0;case 7:t.currentTab=e.t0;case 8:case"end":return e.stop()}}),e)})))()},middleware:"auth"},f=(n(1258),n(16)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[r("PageHeader",{attrs:{title:t.title,items:t.items}}),t._v(" "),r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("header",{staticClass:"group-view-header mb-4"},[r("h1",[t._v(t._s(t.currentGroup.name)+" Group ( "+t._s(t.currentGroup.branch?t.currentGroup.branch.short_name:"Class")+" )")]),t._v(" "),["branch_admin"].includes(t.role)?r("b-dropdown",{staticClass:"mr-2",attrs:{variant:"NEW"==t.currentGroup.status_name?"warning":"STARTED"==t.currentGroup.status_name?"success":"info",disabled:t.loadingStatus},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" \r\n                        Status: \r\n                        "),t.loadingStatus?r("i",{staticClass:"el-icon-loading"}):r("span",[t._v(t._s(t.currentGroup.status_name)+" ")]),t._v(" "),r("i",{staticClass:"mdi mdi-chevron-down"})]},proxy:!0}],null,!1,1279827086)},[t._v(" "),t._l(t.StatusGroup,(function(e,i){return r("b-dropdown-item-button",{key:i,attrs:{varianr:"warning"},on:{click:function(n){return t.SaveStatus(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2):r("b-button",{attrs:{variant:"NEW"==t.currentGroup.status_name?"warning":"STARTED"==t.currentGroup.status_name?"success":"info"}},[t._v("Status: "+t._s(t.currentGroup.status_name)+" ")]),t._v(" "),["branch_admin"].includes(t.role)?r("b-dropdown",{attrs:{variant:"light",right:"",text:"Status: NEW"},scopedSlots:t._u([{key:"button-content",fn:function(){return[r("i",{staticClass:"mdi mdi-cog"}),t._v(" "),r("i",{staticClass:"mdi mdi-chevron-down"})]},proxy:!0}],null,!1,4017828208)},[t._v(" "),r("b-dropdown-item-button",[r("span",[t._v("Edit")])]),t._v(" "),r("b-dropdown-item-button",{on:{click:function(e){return t.EditGroup()}}},[r("span",{staticClass:"color-red"},[t._v("Delete")])])],1):t._e()],1),t._v(" "),r("div",{staticClass:"header-content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"item"},[r("p",[t._v("Branch:")]),t._v(" "),r("span",[t._v(" "+t._s(t.currentGroup&&t.currentGroup.branch&&t.currentGroup.branch.short_name?t.currentGroup.branch.short_name:"--"))])]),t._v(" "),r("div",{staticClass:"item"},[r("p",[t._v("Academic Year:")]),t._v(" "),r("span",[t._v(" "+t._s(t.currentGroup&&t.currentGroup.academic_year&&t.currentGroup.academic_year.name?t.currentGroup.academic_year.name:"--"))])]),t._v(" "),r("div",{staticClass:"item"},[r("p",[t._v("Language:")]),t._v(" "),r("span",[t._v(" "+t._s(t.getKeyValue(t.dic_edu_language,t.currentGroup.education_language,"name")))])]),t._v(" "),r("div",{staticClass:"item"},[r("p",[t._v("Description:")]),t._v(" "),r("span",[t._v(t._s(t.currentGroup&&t.currentGroup.description?t.currentGroup.description:"--"))])])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"item"},[r("p",[t._v("Education Type:")]),t._v(" "),r("span",[t._v(t._s(t.currentGroup&&t.currentGroup.grade&&t.currentGroup.grade.name?t.currentGroup.grade.name:"--")+" class")])]),t._v(" "),r("div",{staticClass:"item"},[r("p",[t._v("Class Teacher:")]),t._v(" "),r("div",[t.currentGroup.teacher?r("nuxt-link",{attrs:{to:"#"}},[t._v("\r\n                                    "+t._s(t._f("fio")(t.currentGroup.teacher))+"\r\n                                ")]):r("span",{staticClass:"text-unmuted"},[t._v("Not assigned")])],1)]),t._v(" "),r("div",{staticClass:"item"},[r("p",[t._v("Created Date:")]),t._v(" "),r("span",[t._v(t._s(t.currentGroup.created_at?t.currentGroup.created_at:"--"))])])])])])])]),t._v(" "),r("b-card",[r("b-tabs",{staticClass:"navtab-bg",attrs:{pills:"","no-card":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[r("b-tab",{attrs:{title:"Students"}},[r("header",{staticClass:"d-flex align-items-center mb-4"},[r("h4",[t._v("Students ("+t._s(t.data.count)+")")]),t._v(" "),r("div",{staticClass:"ml-auto align-items-center d-flex"},[r("b-input",{staticClass:"mr-2",attrs:{placeholder:"Search...",type:"search"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.__GET()}},model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search",e)},expression:"filter.search"}}),t._v(" "),["admin","super_admin","branch_admin"].includes(t.role)?r("b-button",{staticClass:"ml-auto",staticStyle:{"min-width":"160px"},attrs:{disabled:t.currentGroup.branch&&!t.currentGroup.branch.status,variant:"success"},on:{click:function(e){t.currentGroup.branch&&t.currentGroup.branch.status?t.show3=!0:t.show3=!1}}},[r("i",{staticClass:"fas fa-plus-circle mr-1"}),t._v("Add Student\r\n                        ")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"table-header-actions mb-4"},[t.selectedStudents.length?r("b-button",{staticClass:"d-flex align-items-center",attrs:{variant:"light",pill:""}},[t._v("\r\n                        SELECTED: "+t._s(t.selectedStudents.length)+"\r\n                        "),r("svg",{staticClass:"ml-2",attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){t.selectedStudents=[]}}},[r("path",{attrs:{d:"M11.8337 1.34102L10.6587 0.166016L6.00033 4.82435L1.34199 0.166016L0.166992 1.34102L4.82533 5.99935L0.166992 10.6577L1.34199 11.8327L6.00033 7.17435L10.6587 11.8327L11.8337 10.6577L7.17533 5.99935L11.8337 1.34102Z",fill:"#404247"}})])]):t._e(),t._v(" "),["branch_admin"].includes(t.role)&&t.currentGroup.branch&&t.currentGroup.branch.status?r("div",{staticClass:"ml-auto"},[r("b-button",{attrs:{disabled:!t.selectedStudents.length,variant:"light"},on:{click:function(e){t.show=!0}}},[r("i",{staticClass:"mdi mdi-arrow-right-bold mr-1"}),t._v("\r\n                            Move to another class\r\n                        ")]),t._v(" "),r("b-button",{attrs:{disabled:!t.selectedStudents.length,variant:"light"},on:{click:t.deleteFromGroup}},[r("i",{staticClass:"mdi mdi-delete mr-1"}),t._v("\r\n                            Delete from class\r\n                        ")])],1):t._e()],1),t._v(" "),t.loading?t._e():r("div",{staticClass:"foniy-table mb-3"},[r("table",{staticClass:"border-bottom"},[r("tr",{staticClass:"bg-gray"},[["branch_admin"].includes(t.role)&&t.currentGroup.branch&&t.currentGroup.branch.status?r("td",{staticStyle:{width:"30px"}}):t._e(),t._v(" "),r("th",{staticStyle:{width:"50px"}},[t._v("#")]),t._v(" "),r("th"),t._v(" "),r("th",[t._v("Full Name")]),t._v(" "),r("th",[t._v("Branch")]),t._v(" "),r("th",[t._v("Group")]),t._v(" "),r("th",[t._v("Login")]),t._v(" "),r("th",[t._v("Grade")]),t._v(" "),r("th")]),t._v(" "),t._l(t.data.results,(function(e,i){return r("tr",{key:i},[["branch_admin"].includes(t.role)&&t.currentGroup.branch&&t.currentGroup.branch.status?r("td",[r("b-checkbox",{attrs:{value:e,name:"students"},model:{value:t.selectedStudents,callback:function(e){t.selectedStudents=e},expression:"selectedStudents"}})],1):t._e(),t._v(" "),r("td",[t._v(" "+t._s(10*(t.currentPage-1)+i+1)+" ")]),t._v(" "),r("td",{staticStyle:{width:"100px"}},[r("div",{staticClass:"user-table-image"},[e.photo?r("img",{attrs:{src:e.photo,alt:""}}):r("img",{attrs:{src:n(843),alt:""}})])]),t._v(" "),r("td",[["branch_admin","teacher"].includes(t.role)?r("nuxt-link",{attrs:{to:"/tables/students/info/"+e.id}},[r("u",[t._v(t._s(t._f("fio")(e)))])]):r("a",[t._v(" "+t._s(t._f("fio")(e))+" ")])],1),t._v(" "),r("td",[t._v(" "+t._s(e.branch)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(e.group)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(e.login)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(e.grade)+" ")]),t._v(" "),r("td",[["admin","super_admin","branch_admin"].includes(t.role)?r("ul",{staticClass:"list-inline table-action m-0"},[r("li",{staticClass:"list-inline-item",on:{click:function(n){return t.$router.push("/tables/students/add/"+e.id)}}},[r("a",{staticClass:"action-icon px-1",attrs:{href:"javascript:void(0);"}},[r("i",{staticClass:"mdi mdi-pencil"})])]),t._v(" "),r("li",{staticClass:"list-inline-item",on:{click:function(n){return t.rmItem(e.id)}}},[r("a",{staticClass:"action-icon px-1",attrs:{href:"javascript:void(0);"}},[r("i",{staticClass:"mdi mdi-delete"})])])]):t._e()])])}))],2)]),t._v(" "),t.loading?t._e():r("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[r("ul",{staticClass:"pagination pagination-rounded mb-0"},[r("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage},on:{change:t.pageChanged},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),t._v(" "),t.loading?r("div",{staticClass:"table-loader",staticStyle:{height:"500px"}},[r("i",{staticClass:"el-icon-loading"}),t._v(" "),r("p",{staticClass:"m-0 mt-1"},[t._v("loading...")])]):t._e()]),t._v(" "),r("b-tab",{attrs:{title:"Subjects"}},[r("header",{staticClass:"d-flex align-items-center mb-3"},[r("h4",[t._v("Subjects")]),t._v(" "),r("div",{staticClass:"ml-auto align-items-center d-flex"},[r("el-input",{staticStyle:{"max-width":"300px"},attrs:{placeholder:"Search...",clear:"foniy-input",clearable:"","suffix-icon":"el-icon-search"},nativeOn:{change:function(e){return t.getSubjects()}},model:{value:t.search2,callback:function(e){t.search2=e},expression:"search2"}}),t._v(" "),["admin","super_admin","branch_admin"].includes(t.role)?r("b-button",{staticClass:"ml-1",staticStyle:{"min-width":"160px"},attrs:{variant:"success"},on:{click:function(e){t.show2=!0,t.form2={}}}},[r("i",{staticClass:"fas fa-plus-circle mr-1"}),t._v("Add Subject\r\n                        ")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"table-responsive mb-0"},[t.loading?r("div",{staticClass:"card-disabled"},[r("div",{staticClass:"card-portlets-loader"},[r("div",{staticClass:"spinner-border text-primary m-2",attrs:{role:"status"}})])]):t._e(),t._v(" "),r("b-table",{attrs:{items:t.data2.results,fields:t.fields2,responsive:"sm","per-page":t.perPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter2,"filter-included-fields":t.filterOn,"tbody-tr-class":t.rowClass},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(index)",fn:function(data){return[t._v("\r\n                            "+t._s(10*(t.currentPage2-1)+data.index+1)+"\r\n                        ")]}},{key:"cell(subject_name)",fn:function(data){return[r("nuxt-link",{attrs:{to:"/lessons/in-group/"+data.item.id+"?group_id="+data.item.group}},[t._v("\r\n                                "+t._s(data.item.subject_name)+"\r\n                            ")])]}},{key:"cell(main_teacher)",fn:function(data){return[t._v("\r\n                            "+t._s(t._f("fio")(data.item.main_teacher))+"\r\n                        ")]}},{key:"cell(teacher)",fn:function(data){return t._l(data.item.teacher,(function(e){return r("div",{key:e.id},[t._v("\r\n                                -"+t._s(t._f("fio")(e))+"\r\n                            ")])}))}},{key:"cell(actions)",fn:function(data){return[["admin","super_admin","branch_admin"].includes(t.role)?r("ul",{staticClass:"list-inline table-action m-0"},[r("li",{staticClass:"list-inline-item",on:{click:function(e){t.setForm2(data.item),t.show2=!0}}},[r("a",{staticClass:"action-icon px-1",attrs:{href:"javascript:void(0);"}},[r("i",{staticClass:"mdi mdi-pencil"})])]),t._v(" "),r("li",{staticClass:"list-inline-item"},[r("button",{staticClass:"button simple action-icon px-1",class:{"diabled-button":data.item.assignments},attrs:{disabled:data.item.assignments},on:{click:function(e){return t.deleteSubject(data.item.id)}}},[r("i",{staticClass:"mdi mdi-delete"})])])]):t._e()]}}])})],1),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[t.totalRows2?r("ul",{staticClass:"pagination pagination-rounded mb-0"},[r("b-pagination",{attrs:{"total-rows":t.totalRows2,"per-page":t.perPage},on:{change:t.pageChanged2},model:{value:t.currentPage2,callback:function(e){t.currentPage2=e},expression:"currentPage2"}})],1):t._e()])])])]),t._v(" "),r("b-tab",{attrs:{title:"Timetable"}},[r("TimeTableGroup",{attrs:{grade:t.grade}})],1),t._v(" "),r("b-tab",{attrs:{title:"Document"}},[r("DocumentsForGroups")],1)],1)],1),t._v(" "),r("b-modal",{attrs:{size:"lg",id:"semester-view-modal",title:"Timetable file","no-close-on-backdrop":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var n=e.cancel;return[r("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.uploadTimetable()}}},[t._v("\r\n                Save\r\n            ")]),t._v(" "),r("b-button",{attrs:{size:"md"},on:{click:function(t){return n()}}},[t._v(" Close ")])]}}]),model:{value:t.dialog_timetable,callback:function(e){t.dialog_timetable=e},expression:"dialog_timetable"}},[r("ValidationObserver",{ref:"formTimetable"},[r("div",{staticClass:"school-create-form"},[r("div",{staticClass:"item"},[r("p",{staticClass:"mb-1"},[t._v("Upload timetable:")]),t._v(" "),r("FoniyFileUpload",{attrs:{ext:["xls","xlsx"],url:t.timeTable.file},model:{value:t.timeTable.file,callback:function(e){t.$set(t.timeTable,"file",e)},expression:"timeTable.file"}})],1)])])],1),t._v(" "),r("b-modal",{attrs:{title:"Move to another class",size:"lg","title-class":"font-18","body-class":"p-4"},on:{hide:function(e){return t.clearForm()}},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var n=e.cancel;return[r("b-button",{attrs:{size:"md"},on:{click:function(t){return n()}}},[t._v(" Cancel ")]),t._v(" "),r("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.linkStudents()}}},[t._v("\r\n                Move\r\n            ")])]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("ValidationObserver",{ref:"form1"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},t._l(t.selectedStudents,(function(e){return r("b-button",{key:e.id,staticClass:"mb-2 d-flex align-items-center mr-1",attrs:{variant:"light",pill:""}},[t._v("\r\n                        "+t._s(t._f("fio")(e))+"\r\n                        "),r("svg",{staticClass:"ml-2",attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){t.selectedStudents=[]}}},[r("path",{attrs:{d:"M11.8337 1.34102L10.6587 0.166016L6.00033 4.82435L1.34199 0.166016L0.166992 1.34102L4.82533 5.99935L0.166992 10.6577L1.34199 11.8327L6.00033 7.17435L10.6587 11.8327L11.8337 10.6577L7.17533 5.99935L11.8337 1.34102Z",fill:"#404247"}})])])})),1),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"item mb-2"},[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("p",{staticClass:"mb-1"},[t._v("Grade: *")]),t._v(" "),r("b-select",{class:{invalid:n[0]},on:{change:function(e){t.form.group=null}},model:{value:t.form.grade,callback:function(e){t.$set(t.form,"grade",e)},expression:"form.grade"}},t._l(t.dic_grade,(function(t){return r("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})),0)]}}])})],1)]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"item mb-2"},[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("p",{staticClass:"mb-1"},[t._v("Group: *")]),t._v(" "),r("b-select",{class:{invalid:n[0]},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}},t._l(t.DIC_group_LOCAL,(function(t){return r("option",{key:t.id,attrs:{label:t.name+" ("+t.academic_year.name+") - "+t.branch.short_name+" "},domProps:{value:t.id}})})),0)]}}])})],1)])]),t._v(" "),r("div",{staticClass:"item mb-2"},[r("p",{staticClass:"mb-1"},[t._v("Description:")]),t._v(" "),r("b-textarea",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("div",{staticClass:"item mb-2"},[r("p",{staticClass:"mb-1"},[t._v("File (not required):")]),t._v(" "),r("input",{attrs:{type:"file",placeholder:"Fayl qoâ€™shish"},on:{change:t.fileChanged}})])])],1),t._v(" "),r("b-modal",{attrs:{title:(t.form2.id?"Update":"Add")+" Subject",size:"lg","title-class":"font-18","body-class":"p-4"},on:{hide:function(e){return t.clearForm()}},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var n=e.cancel;return[r("b-button",{attrs:{size:"md"},on:{click:function(t){return n()}}},[t._v(" Cancel ")]),t._v(" "),r("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.addSubject()}}},[t._v("\r\n                "+t._s(t.form2.id?"Update":"Add")+" Subject\r\n            ")])]}}]),model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[r("ValidationObserver",{ref:"form2"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"item mb-2"},[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("p",{staticClass:"mb-1"},[t._v("Subject: *")]),t._v(" "),r("b-select",{class:{invalid:n[0]},model:{value:t.form2.subject,callback:function(e){t.$set(t.form2,"subject",e)},expression:"form2.subject"}},t._l(t.dic_subject,(function(t){return r("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})),0)]}}])})],1)]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"item mb-2"},[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("p",{staticClass:"mb-1"},[t._v("Main Teacher: *")]),t._v(" "),r("b-select",{class:{invalid:n[0]},model:{value:t.form2.main_teacher,callback:function(e){t.$set(t.form2,"main_teacher",e)},expression:"form2.main_teacher"}},t._l(t.DIC_all_teachers,(function(e){return r("option",{key:e.id,attrs:{label:t._f("fio")(e)},domProps:{value:e.id}})})),0)]}}])})],1),t._v(" "),r("div",{staticClass:"item mb-2"},[r("h4",{staticClass:"mb-1"},[t._v("Duration")]),t._v(" "),r("b-checkbox",{model:{value:t.form2.duration,callback:function(e){t.$set(t.form2,"duration",e)},expression:"form2.duration"}},[t._v("During the academic year")])],1),t._v(" "),r("div",{staticClass:"item mb-2"},[r("h4",{staticClass:"mb-1"},[t._v("Semesters")]),t._v(" "),r("b-checkbox",{model:{value:t.form2.semester1,callback:function(e){t.$set(t.form2,"semester1",e)},expression:"form2.semester1"}},[t._v("1st semester")]),t._v(" "),r("b-checkbox",{model:{value:t.form2.semester2,callback:function(e){t.$set(t.form2,"semester2",e)},expression:"form2.semester2"}},[t._v("2st semester")])],1)]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"item mb-2"},[r("p",{staticClass:"mb-1"},[t._v("Secondary Teacher: *")]),t._v(" "),r("el-select",{staticClass:"w-full",attrs:{multiple:"","collapse-tags":!0},model:{value:t.form2.teacher,callback:function(e){t.$set(t.form2,"teacher",e)},expression:"form2.teacher"}},t._l(t.DIC_all_teachers,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:t._f("fio")(e)}})})),1)],1)])])])],1),t._v(" "),r("b-modal",{attrs:{title:"Add student to Class (Group)",size:"xl","title-class":"font-18","body-class":"p-4"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var n=e.cancel;return[r("b-button",{attrs:{size:"md"},on:{click:function(t){return n()}}},[t._v(" Cancel ")]),t._v(" "),r("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.linkStudents3()}}},[t._v("\r\n                Save\r\n            ")])]}}]),model:{value:t.show3,callback:function(e){t.show3=e},expression:"show3"}},[r("ValidationObserver",{ref:"form3"},[r("header",{staticClass:"d-flex"},[r("div",{staticClass:"item flex-1"},[r("p",[t._v("Show")]),t._v(" "),r("b-select",{on:{change:function(e){return t.getStudents()}},model:{value:t.filter3.student_group,callback:function(e){t.$set(t.filter3,"student_group",e)},expression:"filter3.student_group"}},[r("option",{attrs:{value:"all_students"}},[t._v("All students")]),t._v(" "),r("option",{attrs:{value:"not_added_to_the_group"}},[t._v("\r\n                            Not Added to the group\r\n                        ")])])],1),t._v(" "),r("div",{staticClass:"item flex-1 mx-2"},[r("p",[t._v("Branch")]),t._v(" "),r("b-select",{on:{change:function(e){return t.getStudents()}},model:{value:t.filter3.branch,callback:function(e){t.$set(t.filter3,"branch",e)},expression:"filter3.branch"}},t._l(t.dic_branch,(function(e){return r("option",{key:e.id,attrs:{label:e.short_name},domProps:{value:e.id}},[t._v("\r\n                            "+t._s(e.short_name)+"\r\n                        ")])})),0)],1),t._v(" "),r("div",{staticClass:"item flex-1 mr-2"},[r("p",[t._v("Grade")]),t._v(" "),r("b-select",{attrs:{"aria-placeholder":"Grade"},on:{change:function(e){return t.getStudents()}},model:{value:t.filter3.grade,callback:function(e){t.$set(t.filter3,"grade",e)},expression:"filter3.grade"}},t._l(t.dic_grade,(function(e){return r("option",{key:e.id,attrs:{label:e.name},domProps:{value:e.id}},[t._v("\r\n                            "+t._s(e.name)+"\r\n                        ")])})),0)],1),t._v(" "),r("div",{staticClass:"item flex-1"},[r("p",[t._v("Year of Birth (Age)")]),t._v(" "),r("b-input",{directives:[{name:"mask",rawName:"v-mask",value:"##.##.####",expression:"'##.##.####'"}],attrs:{placeholder:"Year of Birth (Age)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getStudents()}},model:{value:t.filter3.date_of_birth,callback:function(e){t.$set(t.filter3,"date_of_birth",e)},expression:"filter3.date_of_birth"}})],1),t._v(" "),r("div",{staticClass:"item d-flex"},[r("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mt-auto btn btn-clear",attrs:{title:"Clear filter"},on:{click:function(e){t.filter3={},t.getStudents()}}},[r("i",{staticClass:"mdi mdi-broom text-lg-center"})])])]),t._v(" "),r("header",{staticClass:"d-flex my-3 justify-content-space-between align-items-center"},[r("div",{staticClass:"item d-flex align-items-center"},[t._v("\r\n                    Show:\r\n                    "),r("b-select",{staticClass:"ml-2",on:{change:function(e){return t.getStudents()}},model:{value:t.filter3.limit,callback:function(e){t.$set(t.filter3,"limit",e)},expression:"filter3.limit"}},[r("option",{attrs:{selected:""}},[t._v("10")]),t._v(" "),r("option",[t._v("20")]),t._v(" "),r("option",[t._v("30")]),t._v(" "),r("option",[t._v("50")])])],1),t._v(" "),r("div",{staticClass:"item d-flex ml-auto align-items-center"},[t._v("\r\n                    Search:\r\n                    "),r("b-input",{staticClass:"ml-2",attrs:{placeholder:"Search"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getStudents()}},model:{value:t.filter3.search,callback:function(e){t.$set(t.filter3,"search",e)},expression:"filter3.search"}})],1)]),t._v(" "),r("table",{staticClass:"table students-list-table b-table"},[r("thead",[r("tr",[r("th",[t._v("Name")]),t._v(" "),r("th",[t._v("Grade/Language/Branch")]),t._v(" "),r("th",[t._v("Group")])])]),t._v(" "),r("tbody",t._l(t.studentList.results,(function(e){return r("tr",{key:e.id,class:{"table-warning":t.selectedStudents3_id.includes(e.id)},on:{click:function(n){return t.clickedStudent(e)}}},[r("td",[r("p",[t._v(t._s(t._f("fio")(e)))]),t._v(" "),r("span",[t._v(t._s(e.date_of_birth))])]),t._v(" "),r("td",[r("p",[t._v(t._s(e.grade)+" class")]),t._v(" "),r("span",[t._v("English ("+t._s(e.branch)+")")])]),t._v(" "),r("td",[e.group?r("p",[t._v(t._s(e.group)+" (2021-2022)")]):r("span",[t._v("Not added to group")])])])})),0)]),t._v(" "),r("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[r("ul",{staticClass:"pagination pagination-rounded mb-0"},[r("b-pagination",{attrs:{"total-rows":t.studentList.count,"per-page":t.perPage},on:{change:t.pageChanged3},model:{value:t.currentPage3,callback:function(e){t.currentPage3=e},expression:"currentPage3"}})],1)])])],1)],1)}),[],!1,null,"9bd49702",null);e.default=component.exports;installComponents(component,{PageHeader:n(837).default,TimeTableGroup:n(1e3).default,DocumentsForGroups:n(1141).default,FoniyFileUpload:n(968).default})},837:function(t,e,n){"use strict";n.r(e);var r=n(35),l={components:{},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},computed:Object(r.c)(["layout"])},o=n(16),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"page-title-box",class:{"page-title-box-alt":"vertical"!==t.layout.layoutType&&"two-column"!==t.layout.layoutType}},[n("h4",{staticClass:"page-title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"page-title-right"},[n("b-breadcrumb",{staticClass:"m-0",attrs:{items:t.items}})],1)])])])}),[],!1,null,null,null);e.default=component.exports},843:function(t,e,n){t.exports=n.p+"img/default-avatar.26ed590.svg"},895:function(t,e,n){var content=n(962);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("39800e11",content,!0,{sourceMap:!1})},908:function(t,e,n){var content=n(989);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("61dcd6cc",content,!0,{sourceMap:!1})},961:function(t,e,n){"use strict";n(895)},962:function(t,e,n){var r=n(52)(!1);r.push([t.i,'.foniy-upload-file .foniy-file-upload-button{position:relative;display:flex;align-items:center;justify-content:space-between;padding:10px 15px;min-width:200px;border:1px solid #ced4da;border-radius:5px;overflow:hidden}.foniy-upload-file .foniy-file-upload-button p{font-family:"Roboto";font-style:normal;font-weight:600;font-size:14px;line-height:16px;margin:0 10px 0 0;width:calc(100% - 30px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;position:relative;z-index:0}.foniy-upload-file .foniy-file-upload-button-input{position:relative;flex:1;display:flex;align-items:center}.foniy-upload-file input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:1;cursor:pointer}',""]),t.exports=r},968:function(t,e,n){"use strict";n.r(e);var r={props:["value","disabled","ext"],data:function(){return{file:null}},watch:{value:{handler:function(t){this.fileList=t},immediate:!0},file:function(){this.$emit("input",this.file)}},methods:{UploadFile:function(t){this.file=t.target.files[0]}}},l=(n(961),n(16)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"foniy-upload-file",class:{disabled:t.disabled}},[n("div",{staticClass:"foniy-file-upload-button"},[n("div",{staticClass:"foniy-file-upload-button-input"},[n("input",{class:{disabled:t.disabled},attrs:{type:"file",disabled:t.disabled,accept:t.ext},on:{input:t.UploadFile}}),t._v(" "),n("p",[t._v(t._s(t.file&&t.file.name?t.file.name:"Upload file"))]),t._v(" "),t.file&&t.file.name?n("i",{staticClass:"mdi mdi-pencil font-weight-bold color-green font-16"}):n("svg",{attrs:{width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9995 0C13.9795 0 16.4455 2.174 16.9125 5.021C19.7565 5.233 21.9995 7.602 21.9995 10.5C21.9995 13.537 19.5365 16 16.4995 16H4.99951C2.23851 16 -0.000488281 13.761 -0.000488281 11C-0.000488281 8.239 2.23851 6 4.99951 6C4.99951 2.686 7.68651 0 10.9995 0ZM14.6815 8.598L14.8885 8.391C15.0835 8.196 15.0835 7.879 14.8885 7.684L11.3535 4.148C11.1555 3.95 10.8445 3.951 10.6465 4.148L7.11151 7.684C6.91551 7.879 6.91551 8.196 7.11151 8.391L7.31851 8.598C7.41151 8.692 7.53851 8.745 7.67151 8.745H8.99951V12.5C8.99951 12.776 9.22351 13 9.49951 13H12.4995C12.7765 13 12.9995 12.776 12.9995 12.5V8.745H14.3275C14.4605 8.745 14.5875 8.692 14.6815 8.598Z",fill:t.file?"#0FBE7B":"#333333"}})])])])])}),[],!1,null,null,null);e.default=component.exports},988:function(t,e,n){"use strict";n(908)},989:function(t,e,n){var r=n(52)(!1);r.push([t.i,".time-table-view .time-table-view-items[data-v-69e34058]{display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.time-table-view .time-table-view-item[data-v-69e34058]{width:50%;padding:10px}.time-table-view .empty-time-table[data-v-69e34058]{width:100%;height:300px;display:flex;align-items:center;justify-content:center}",""]),t.exports=r}}]);